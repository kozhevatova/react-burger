{"version":3,"sources":["components/app/app.module.css","components/bun/bun.module.css","components/filling-item/filling-item.module.css","pages/main-content/main-content.module.css","components/modal-overlay/modal-overlay.module.css","pages/profile/profile.module.css","components/order-item/order-item.module.css","pages/order/order.module.css","reportWebVitals.ts","components/app-header/app-header.tsx","utils/constants.tsx","types/action-types/ingredient-types.ts","utils/utils.tsx","utils/api.tsx","services/actions/ingredients.ts","services/reducers/ingredients/ingredients.ts","services/actions/order.ts","services/reducers/order/order.ts","services/actions/user.ts","services/reducers/user/user.ts","services/actions/ws.ts","services/reducers/ws/ws.ts","services/reducers/index.ts","services/middlewares/socketMiddleware.ts","services/store.ts","components/ingredient-details/ingredient-details.tsx","images/done.svg","components/order-details/order-details.tsx","components/bun/bun.tsx","components/filling-item/filling-item.tsx","components/burger-constructor/burger-constructor.tsx","components/ingredient-item/ingredient-item.tsx","components/ingredients-list/ingredients-list.tsx","components/burger-ingredients/burger-ingredients.tsx","pages/main-content/main-content.tsx","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","components/auth-form/auth-form.tsx","pages/login/login.tsx","pages/register/register.tsx","pages/forgot-password/forgot-password.tsx","components/profile-menu/profile-menu.tsx","pages/profile/profile.tsx","pages/reset-password/reset-password.tsx","pages/ingredient-item-page/ingredient-item-page.tsx","components/protected-route/protected-route.tsx","components/profile-form/profile-form.tsx","pages/not-found-page/not-found-page.tsx","components/order-feed-info/order-feed-info.tsx","components/order-item/order-item.tsx","images/ingredient.png","components/order-list/order-list.tsx","pages/feed/feed.tsx","pages/order/order.tsx","components/app/App.tsx","index.tsx","components/ingredient-details/ingredient-details.module.css","components/order-feed-info/order-feed-info.module.css","components/burger-ingredients/burger-ingredients.module.css","components/auth-form/auth-form.module.css","components/order-details/order-details.module.css","components/burger-constructor/burger-constructor.module.css","components/ingredient-item/ingredient-item.module.css","components/profile-menu/profile-menu.module.css","components/profile-form/profile-form.module.css","components/modal/modal.module.css","components/ingredients-list/ingredients-list.module.css","pages/not-found-page/not-found-page.module.css","pages/feed/feed.module.css","components/app-header/app-header.module.css","pages/ingredient-item-page/ingredient-item-page.module.css","components/order-list/order-list.module.css"],"names":["module","exports","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","AppHeader","useState","burger","list","profile","iconType","setIconType","linkClassName","classNames","styles","link","textClassName","changeIconType","iconName","primary","className","header","to","onMouseOver","onMouseLeave","type","wsUrl","ingredientDetailsTitle","loginLinks","text","path","linkText","registerLinks","forgotPasswordLinks","loginTitles","registerTitles","forgotPasswordTitles","resetPasswordTitles","profileMenuLinks","id","getIngredientsFailed","error","GET_INGREDIENTS_FAILED","setCookie","name","value","props","exp","expires","d","Date","setTime","getTime","toUTCString","updatedCookie","encodeURIComponent","propName","propValue","document","cookie","getCookie","matches","match","RegExp","replace","decodeURIComponent","undefined","deleteCookie","setTokens","data","console","log","accessToken","authToken","split","refreshToken","chooseMenuCaption","formatDate","date","Array","from","day","Api","options","baseUrl","this","response","ok","json","Promise","reject","Error","status","fetch","headers","Authorization","_getResponseData","ingredients","method","body","JSON","stringify","email","password","token","api","GET_INGREDIENTS_REQUEST","GET_INGREDIENTS_SUCCESS","GET_INGREDIENT_DETAILS","OPEN_INGREDIENT_MODAL","CLOSE_INGREDIENT_MODAL","TAB_SWITCH","INCREASE_COUNT","DECREASE_COUNT","RESET_COUNT","getAllIngredients","dispatch","getIngredients","success","map","item","qty","catch","message","initialState","currentIngredient","ingredientsRequest","ingredientsFailed","isIngredientModalOpen","isLoading","currentTab","ADD_ITEM","DELETE_ITEM","MAKE_ORDER_REQUEST","MAKE_ORDER_SUCCESS","MAKE_ORDER_FAILED","OPEN_ORDER_MODAL","CLOSE_ORDER_MODAL","OPEN_MADE_ORDER_MODAL","CLOSE_MADE_ORDER_MODAL","SWAP_INGREDIENTS","totalPrice","orderedIngredients","buns","_id","price","image","filling","orderRequest","orderFailed","orderId","isOrderModalOpen","isMadeOrderModalOpen","LOGIN_FORM_SET_VALUE","REGISTER_FORM_SET_VALUE","FORGOT_PASSWORD_FORM_SET_VALUE","RESET_PASSWORD_FORM_SET_VALUE","PROFILE_FORM_SET_VALUE","LOGIN_FORM_SUBMIT","REGISTER_FORM_SUBMIT","FORGOT_PASSWORD_FORM_SUBMIT","RESET_PASSWORD_FORM_SUBMIT","LOGIN_FORM_SUBMIT_SUCCESS","REGISTER_FORM_SUBMIT_SUCCESS","FORGOT_PASSWORD_FORM_SUBMIT_SUCCESS","RESET_PASSWORD_FORM_SUBMIT_SUCCESS","LOGIN_FORM_SUBMIT_FAILED","REGISTER_FORM_SUBMIT_FAILED","FORGOT_PASSWORD_FORM_SUBMIT_FAILED","RESET_PASSWORD_FORM_SUBMIT_FAILED","GET_USER_INFO_REQUEST","GET_USER_INFO_FAILED","GET_USER_INFO_SUCCESS","UPDATE_USER_INFO_REQUEST","UPDATE_USER_INFO_FAILED","UPDATE_USER_INFO_SUCCESS","CLOSE_UPDATE_INFO_MODAL","LOGOUT_REQUEST","LOGOUT_REQUEST_SUCCESS","LOGOUT_REQUEST_FAILED","setProfileFormValue","field","handleTokenExpire","repeatRequestAfterRefresh","getUserInfo","user","updateUserInfo","getState","profileForm","loginForm","registerForm","forgotPasswordForm","resetPasswordForm","newPassword","registrationRequest","registrationFailed","loginRequest","loginFailed","forgotPasswordRequest","forgotPasswordFailed","emailSent","resetPasswordRequest","resetPasswordFailed","resetSuccess","userInfoRequest","userInfoFailed","updateSuccess","updateUserInfoRequest","updateUserInfoRequestFailed","logoutRequest","logoutRequestFailed","WS_CONNECTION_START","WS_CONNECTION_SUCCESS","WS_CONNECTION_ERROR","WS_CONNECTION_CLOSED","WS_GET_ORDERS","wsConnected","wsStarted","orders","totalOrdersCount","todayOrdersCount","rootReducer","combineReducers","order","state","action","uid","v4","filter","tab","ws","length","total","totalToday","socketMiddleware","wsActions","store","socket","next","payload","wsInit","wsSendMessage","onOpen","onClose","onError","onMessage","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","onclose","send","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","createStore","applyMiddleware","thunkMiddleware","initStore","useAppDispatch","useDispatch","useSelectorHook","useSelector","IngredientDetails","useParams","find","nameClassName","digitClassName","details","src","alt","nutritionalValue","calories","proteins","fat","carbohydrates","OrderDetails","idClassName","info","titleClassName","title","done","Bun","top","bun","bunStyles","isLocked","thumbnail","FillingItem","index","swapIngredients","ref","useRef","useDrag","collect","monitor","isDragging","drag","useDrop","accept","isHover","isOver","hover","dragIndex","hoverIndex","current","drop","constructorElement","style","opacity","draggable","handleClose","deletedItem","BurgerConstructor","history","useHistory","dropRef","containerClassName","burgerConstructor","hoveredContainer","useCallback","draggedItem","swappedFilling","splice","content","useMemo","minHeight","marginTop","display","alignItems","justifyContent","width","makeOrderInfo","size","onClick","makeOrder","concat","number","pathname","IngredientItem","location","useLocation","dragRef","cardClassName","card","dragCard","digit","background","count","IngredientsList","anchorId","BurgerIngredients","handleScroll","scrollableList","getElementById","bunArea","sauceArea","mainArea","getBoundingClientRect","handleClick","e","preventDefault","anchorTarget","currentTarget","scrollTo","offsetTop","behavior","setCurrentTab","onScroll","scrollableListItem","tabs","active","MainContent","main","DndProvider","backend","HTML5Backend","ModalOverlay","overlay","handleCloseByClickOnOverlay","children","Modal","isHovered","setIsHovered","modalRoot","handleModalClose","handleEscClose","key","useEffect","addEventListener","removeEventListener","ReactDOM","createPortal","target","modal","modalHeader","closeButton","AuthForm","buttonTitle","links","onSubmit","titleClassname","form","listItem","Login","formTitle","onChange","setLoginFormValue","login","placeholder","Register","setRegisterFormValue","register","ForgotPassword","requestResetPassword","localStorage","setItem","setForgotPasswordFormValue","ProfileMenu","useRouteMatch","logout","res","linkList","linkListItem","activeClassName","activeLink","Profile","ResetPassword","isPasswordShown","setIsPasswordShown","getItem","setResetPasswordFormValue","resetPassword","removeItem","icon","onIconClick","IngredientItemPage","page","ProtectedRoute","rest","isUserLoaded","setIsUserLoaded","render","ProfileForm","initialIconState","isInputInFocus","setIsInputInFocus","nameRef","emailRef","passwordRef","clearField","setTimeout","focus","inputList","inputListItem","buttons","NotFoundPage","goBack","OrderFeedInfo","orderIdClassName","doneOrders","reverse","slice","inProgressOrders","countClassName","orderNums","OrderItem","wide","isLeft","setIsLeft","leftCount","setLeftCount","url","allIngredients","createdAt","orderIngredients","orderClassName","orderWide","dateClassName","priceClassName","leftNumClassName","leftNum","statusClassName","statusReady","titleContainer","ingredient","ingredientImage","left","OrderList","listClassName","listWide","sort","a","b","Feed","feed","Order","isModal","setTotalPrice","Number","ingredientsToShow","setIngredientsToShow","ingredientsList","reduce","prev","findIndex","orderIdModal","ingredientNameClassName","App","isAppLoading","handleModalsClose","exact","StrictMode"],"mappings":"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","file":"static/js/main.9f9397bf.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"app_App__3t73x\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bun\":\"bun_bun__1joMo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructorElement\":\"filling-item_constructorElement__2kUM6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"main-content_main__1dLe8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__AKixE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile\":\"profile_profile__26YER\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-item_order__1NveV\",\"orderWide\":\"order-item_orderWide__3dlkH\",\"orderId\":\"order-item_orderId__vA4vU\",\"date\":\"order-item_date__15k4U\",\"titleContainer\":\"order-item_titleContainer__6aZoX\",\"title\":\"order-item_title__2CJ7C\",\"status\":\"order-item_status__39PoF\",\"statusReady\":\"order-item_statusReady__32RVn\",\"ingredients\":\"order-item_ingredients__1LBCm\",\"ingredient\":\"order-item_ingredient__17mD1\",\"ingredientImage\":\"order-item_ingredientImage__eE5ks\",\"left\":\"order-item_left__eZgBf\",\"leftNum\":\"order-item_leftNum__mZ4Rc\",\"price\":\"order-item_price__2o1lz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order_order__1Y9Ze\",\"orderId\":\"order_orderId__EtTUm\",\"orderIdModal\":\"order_orderIdModal__I_Bjq\",\"title\":\"order_title__3Nbmq\",\"status\":\"order_status__1nqDp\",\"statusReady\":\"order_statusReady__364lf\",\"ingredients\":\"order_ingredients__37JOk\",\"ingredient\":\"order_ingredient__k8CFr\",\"image\":\"order_image__1bvzw\",\"name\":\"order_name__3H9Zj\",\"price\":\"order_price__28clU\",\"date\":\"order_date__2j-AB\",\"total\":\"order_total__27-wZ\"};","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React, { FC, useState } from \"react\";\nimport { NavLink } from \"react-router-dom\";\nimport classNames from \"classnames\";\nimport styles from \"./app-header.module.css\";\nimport {\n  Logo,\n  BurgerIcon,\n  ListIcon,\n  ProfileIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { IconTypeKey } from \"../../types/types\";\n\nconst AppHeader:FC = () => {\n  const [iconType, setIconType] = useState({\n    burger: \"secondary\",\n    list: \"secondary\",\n    profile: \"secondary\",\n  });\n  const linkClassName = classNames(styles.link, \"p-5\", \"mt-4\", \"mb-4\", \"mr-2\");\n  const textClassName = classNames(\"text\", \"text_type_main-default\", \"ml-2\");\n\n  //меняет тип иконки  при hover\n  const changeIconType = (iconName: IconTypeKey, primary: Boolean) => {\n    setIconType({\n      ...iconType,\n      [iconName]: primary ? \"secondary\" : \"primary\",\n    });\n  };\n\n  return (\n    <header className={styles.header}>\n      <NavLink\n        to=\"/\"\n        className={linkClassName}\n        onMouseOver={() => changeIconType(\"burger\", false)}\n        onMouseLeave={() => changeIconType(\"burger\", true)}\n      >\n        {iconType.burger === \"primary\" ? (\n          <BurgerIcon type=\"primary\" />\n        ) : (\n          <BurgerIcon type=\"secondary\" />\n        )}\n        <p className={textClassName}>Конструктор</p>\n      </NavLink>\n      <NavLink\n        to=\"/feed\"\n        className={linkClassName}\n        onMouseOver={() => changeIconType(\"list\", false)}\n        onMouseLeave={() => changeIconType(\"list\", true)}\n      >\n        {iconType.list === \"primary\" ? (\n          <ListIcon type=\"primary\" />\n        ) : (\n          <ListIcon type=\"secondary\" />\n        )}\n        <p className={textClassName}>Лента заказов</p>\n      </NavLink>\n      <NavLink to=\"/\" className={linkClassName}>\n        <Logo />\n      </NavLink>\n      <NavLink\n        to=\"/profile\"\n        className={linkClassName}\n        onMouseOver={() => changeIconType(\"profile\", false)}\n        onMouseLeave={() => changeIconType(\"profile\", true)}\n      >\n        {iconType.profile === \"primary\" ? (\n          <ProfileIcon type=\"primary\" />\n        ) : (\n          <ProfileIcon type=\"secondary\" />\n        )}\n        <p className={textClassName}>Личный кабинет</p>\n      </NavLink>\n    </header>\n  );\n};\n\nexport default AppHeader;\n","export const BASE_URL = \"https://norma.nomoreparties.space/api\";\nexport const wsUrl = \"wss://norma.nomoreparties.space/orders\";\n\nexport const ingredientDetailsTitle = \"Детали ингредиента\";\nexport const topBunLabel = \" (верх)\";\nexport const bottomBunLabel = \" (низ)\";\n\nexport const loginLinks = [\n  {\n    text: \"Вы - новый пользователь?\",\n    path: \"/register\",\n    linkText: \"Зарегистрироваться\",\n  },\n  {\n    text: \"Забыли пароль?\",\n    path: \"/forgot-password\",\n    linkText: \"Восстановить пароль\",\n  },\n];\n\nexport const registerLinks = [\n  {\n    text: \"Уже зарегистрированы?\",\n    path: \"/login\",\n    linkText: \"Войти\",\n  },\n];\n\nexport const forgotPasswordLinks = [\n  {\n    text: \"Вспомнили пароль?\",\n    path: \"/login\",\n    linkText: \"Войти\",\n  },\n];\n\nexport const loginTitles = {\n  formTitle: \"Вход\",\n  buttonTitle: \"Войти\",\n};\n\nexport const registerTitles = {\n  formTitle: \"Регистрация\",\n  buttonTitle: \"Зарегистрироваться\",\n};\n\nexport const forgotPasswordTitles = {\n  formTitle: \"Восстановление пароля\",\n  buttonTitle: \"Восстановить\",\n};\n\nexport const resetPasswordTitles = {\n  formTitle: \"Восстановление пароля\",\n  buttonTitle: \"Сохранить\",\n};\n\nexport const profileMenuLinks = [\n  {\n    text: 'Профиль',\n    link: '/profile',\n    id: 'profile',\n  },\n  {\n    text: 'История заказов',\n    link: '/profile/orders',\n    id: 'orders'\n  },\n  {\n    text: 'Выход',\n    link: '/login',\n    id: 'logout'\n  }\n]\n\n  export const profileCaption = 'В этом разделе вы можете изменить свои персональные данные';\n \n  export const ordersCaption = 'В этом разделе вы можете просмотреть свою историю заказов';\n\n  export const maxAmountOfIngredients = 6;\n  export const maxAmountOrdersToShow = 23;","import { IngredientType } from './../types';\nimport {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  GET_INGREDIENTS_FAILED,\n  GET_INGREDIENT_DETAILS,\n  OPEN_INGREDIENT_MODAL,\n  CLOSE_INGREDIENT_MODAL,\n  TAB_SWITCH,\n  INCREASE_COUNT,\n  DECREASE_COUNT,\n  RESET_COUNT,\n} from \"../../services/actions/ingredients\";\n\nexport interface IGetIngredientsRequest {\n  readonly type: typeof GET_INGREDIENTS_REQUEST;\n}\n\nexport interface IGetIngredientsSuccess {\n  readonly type: typeof GET_INGREDIENTS_SUCCESS;\n  readonly ingredients: Array<IngredientType>;\n}\n\nexport interface IGetIngredientsFailed {\n  readonly type: typeof GET_INGREDIENTS_FAILED;\n  readonly error: string;\n}\n\nexport interface IGetIngredientDetails {\n  readonly type: typeof GET_INGREDIENT_DETAILS;\n  readonly item: IngredientType\n}\n\nexport interface IOpenIngredientModal {\n  readonly type: typeof OPEN_INGREDIENT_MODAL;\n}\n\nexport interface ICloseIngredientModal {\n  readonly type: typeof CLOSE_INGREDIENT_MODAL;\n}\n\nexport interface ITabSwitch {\n  readonly type: typeof TAB_SWITCH;\n  readonly tab: string;\n}\n\nexport interface IIncreaseCount {\n  readonly type: typeof INCREASE_COUNT;\n  readonly item: IngredientType;\n}\n\nexport interface IDecreaseCount {\n  readonly type: typeof DECREASE_COUNT;\n  readonly item: IngredientType;\n}\n\nexport interface IResetCount {\n  readonly type: typeof RESET_COUNT;\n}\n\nexport type TIngredientsActions =\n  | IGetIngredientsRequest\n  | IGetIngredientsSuccess\n  | IGetIngredientsFailed\n  | IGetIngredientDetails\n  | IOpenIngredientModal\n  | ICloseIngredientModal\n  | ITabSwitch\n  | IIncreaseCount\n  | IDecreaseCount\n  | IResetCount;\n\n\n  export const getIngredientsRequest = (): IGetIngredientsRequest => ({\n    type: GET_INGREDIENTS_REQUEST\n  });\n\n  export const getIngredientsSuccess = (ingredients: Array<IngredientType>): IGetIngredientsSuccess => ({\n    type: GET_INGREDIENTS_SUCCESS,\n    ingredients\n  });\n\n  export const getIngredientsFailed = (error: string): IGetIngredientsFailed => ({\n    type: GET_INGREDIENTS_FAILED,\n    error\n  });","import { profileCaption, ordersCaption } from \"./constants\";\n\nexport const setCookie = (name: string, value: string, props?: any) => {\n  props = props || {};\n  let exp = props.expires;\n  if (typeof exp == \"number\" && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp && exp.toUTCString) {\n    props.expires = exp.toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = name + \"=\" + value;\n  for (const propName in props) {\n    updatedCookie += \"; \" + propName;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += \"=\" + propValue;\n    }\n  }\n  document.cookie = updatedCookie;\n};\n\nexport const getCookie = (name: string) => {\n  const matches = document.cookie.match(\n    new RegExp(\n      \"(?:^|; )\" + name.replace(/([.$?*|{}()[\\]\\\\/+^])/g, \"\\\\$1\") + \"=([^;]*)\"\n    )\n  );\n  return matches ? decodeURIComponent(matches[1]) : undefined;\n};\n\nexport const deleteCookie = (name: string) => {\n  if (getCookie(name)) {\n    document.cookie = name + \"= ;expires=Thu, 01 Jan 1970 00:00:01 GMT\";\n  }\n};\n\nexport const setTokens = (data: {accessToken: string, refreshToken: string}) => {\n  console.log(\"set token\", data.accessToken);\n  const authToken = data.accessToken.split(\"Bearer \")[1];\n  const refreshToken = data.refreshToken;\n  if (authToken) {\n    setCookie(\"token\", authToken);\n  }\n  if (refreshToken) {\n    setCookie(\"refreshToken\", refreshToken);\n  }\n};\n\nexport const chooseMenuCaption = (path: string) => {\n  switch (path) {\n    case \"/profile\": {\n      return profileCaption;\n    }\n    case \"/profile/orders\": {\n      return ordersCaption;\n    }\n  }\n};\n\nexport const formatDate = (date: string) => {\n  const [day, time] = Array.from(date.split('.'))[0].split('T');\n  return time + ' ' + day;\n}\n","import { BASE_URL } from \"./constants\";\nimport { getCookie } from \"./utils\";\n\nclass Api {\n  baseUrl: string;\n  constructor(options: { baseUrl: string }) {\n    this.baseUrl = options.baseUrl;\n  }\n\n  _getResponseData(response: Response) {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(new Error(`Ошибка: ${response.status}`));\n  }\n\n  getIngredients() {\n    return fetch(`${this.baseUrl}/ingredients`, {\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: 'Bearer ' + getCookie('token')\n      },\n    }).then((response) => this._getResponseData(response));\n  }\n\n  makeOrder(ingredients: Array<string>) {\n    return fetch(`${this.baseUrl}/orders`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: 'Bearer ' + getCookie('token')\n      },\n      body: JSON.stringify({\n        ingredients: ingredients,\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n\n  login(email: string, password: string) {\n    return fetch(`${this.baseUrl}/auth/login`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email,\n        password,\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n\n  register(name: string, email: string, password: string) {\n    console.log(name, email, password);\n    return fetch(`${this.baseUrl}/auth/register`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        name,\n        email,\n        password,\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n\n  refreshToken() {\n    return fetch(`${this.baseUrl}/auth/token`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        token: getCookie('refreshToken'),\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n\n  logout() {\n    return fetch(`${this.baseUrl}/auth/logout`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        token: getCookie('refreshToken'),\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n\n  getUserInfo() {\n    return fetch(`${this.baseUrl}/auth/user`, {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: 'Bearer ' + getCookie('token')\n      },\n    }).then((response) => this._getResponseData(response));\n  }\n\n  updateUserInfo(name:string, email:string, password:string) {\n    return fetch(`${this.baseUrl}/auth/user`, {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: 'Bearer ' + getCookie('token')\n      },\n      body: JSON.stringify({\n        name, email, password,\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n\n  requestResetPassword(email: string) {\n    return fetch(`${this.baseUrl}/password-reset`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        email,\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n\n  resetPassword(password: string, token: string) {\n    return fetch(`${this.baseUrl}/password-reset/reset`, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({\n        password,\n        token,\n      }),\n    }).then((response) => this._getResponseData(response));\n  }\n}\n\nconst api = new Api({\n  baseUrl: BASE_URL,\n});\n\nexport default api;\n","import { ThunkType } from './../store';\nimport { getIngredientsRequest, getIngredientsSuccess, getIngredientsFailed } from './../../types/action-types/ingredient-types';\nimport { IngredientType } from './../../types/types';\nimport api from \"../../utils/api\";\nimport { AppDispatch } from \"../store\";\nexport const GET_INGREDIENTS_REQUEST = \"GET_INGREDIENTS_REQUEST\" as const;\nexport const GET_INGREDIENTS_SUCCESS = \"GET_INGREDIENTS_SUCCESS\"  as const;\nexport const GET_INGREDIENTS_FAILED = \"GET_INGREDIENTS_FAILED\" as const;\n\nexport const GET_INGREDIENT_DETAILS = \"GET_INGREDIENT_DETAILS\" as const;\nexport const RESET_INGREDIENT_DETAILS = \"RESET_INGREDIENT_DETAILS\" as const;\n\nexport const OPEN_INGREDIENT_MODAL = \"OPEN_INGREDIENT_MODAL\" as const;\nexport const CLOSE_INGREDIENT_MODAL = \"CLOSE_INGREDIENT_MODAL\" as const;\n\nexport const TAB_SWITCH = \"TAB_SWITCH\" as const;\n\nexport const INCREASE_COUNT = \"INCREASE_COUNT\" as const;\nexport const DECREASE_COUNT = \"DECREASE_COUNT\" as const;\nexport const RESET_COUNT = \"RESET_COUNT\" as const;\n\nexport const getAllIngredients:ThunkType = () => {\n  return (dispatch: AppDispatch) => {\n    dispatch(getIngredientsRequest());\n    api.getIngredients().then((response) => {\n      if(response && response.success) {\n        dispatch(getIngredientsSuccess(response.data.map((item: IngredientType) => ({...item, qty: 0}))));\n      } else {\n        dispatch(getIngredientsFailed(''))\n      }\n    })\n    .catch((error) => {\n      dispatch(getIngredientsFailed(error.message))\n    });\n  };\n};\n","import {\n  GET_INGREDIENTS_REQUEST,\n  GET_INGREDIENTS_SUCCESS,\n  GET_INGREDIENTS_FAILED,\n  GET_INGREDIENT_DETAILS,\n  OPEN_INGREDIENT_MODAL,\n  CLOSE_INGREDIENT_MODAL,\n  TAB_SWITCH,\n  INCREASE_COUNT,\n  DECREASE_COUNT,\n  RESET_COUNT,\n} from \"../../actions/ingredients\";\n\nimport { TIngredientsActions } from \"../../../types/action-types/ingredient-types\";\nimport { TIngredientsState } from \"../../../types/types\";\n\nconst initialState: TIngredientsState = {\n  ingredients: [],\n  currentIngredient: {},\n  ingredientsRequest: false,\n  ingredientsFailed: false,\n  isIngredientModalOpen: false,\n  isLoading: false,\n  error: \"\",\n  currentTab: \"bun\",\n};\n\nexport const ingredientsReducer = (\n  state = initialState,\n  action: TIngredientsActions\n): TIngredientsState => {\n  switch (action.type) {\n    case GET_INGREDIENTS_REQUEST: {\n      return {\n        ...state,\n        ingredientsRequest: true,\n        ingredientsFailed: false,\n        error: initialState.error,\n      };\n    }\n    case GET_INGREDIENTS_SUCCESS: {\n      return {\n        ...state,\n        ingredientsRequest: false,\n        ingredientsFailed: false,\n        ingredients: action.ingredients,\n        error: initialState.error,\n      };\n    }\n    case GET_INGREDIENTS_FAILED: {\n      return {\n        ...state,\n        ingredientsRequest: false,\n        ingredientsFailed: true,\n        error: action.error,\n      };\n    }\n    case GET_INGREDIENT_DETAILS: {\n      return {\n        ...state,\n        currentIngredient: action.item,\n      };\n    }\n    case OPEN_INGREDIENT_MODAL: {\n      return {\n        ...state,\n        isIngredientModalOpen: true,\n      };\n    }\n    case CLOSE_INGREDIENT_MODAL: {\n      return {\n        ...state,\n        currentIngredient: {},\n        isIngredientModalOpen: false,\n      };\n    }\n    case TAB_SWITCH: {\n      return {\n        ...state,\n        currentTab: action.tab,\n      };\n    }\n    case INCREASE_COUNT: {\n      return {\n        ...state,\n        ingredients: [...state.ingredients].map((item) => {\n          if (action.item.type === \"bun\" && item.type === \"bun\") {\n            if (item._id === action.item._id) {\n              return { ...item, qty: 1 };\n            } else {\n              return { ...item, qty: 0 };\n            }\n          } else if (item._id === action.item._id) {\n            return { ...item, qty: ++item.qty };\n          }\n          return item;\n        }),\n      };\n    }\n    case DECREASE_COUNT: {\n      return {\n        ...state,\n        ingredients: [...state.ingredients].map((item) =>\n          item._id === action.item._id ? { ...item, qty: --item.qty } : item\n        ),\n      };\n    }\n    case RESET_COUNT: {\n      return {\n        ...state,\n        ingredients: [...state.ingredients].map((item) => ({\n          ...item,\n          qty: 0,\n        })),\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import { OrderedIngredientsType } from \"./../../types/types\";\nimport api from \"../../utils/api\";\nimport { AppDispatch } from \"../store\";\n\nexport const ADD_ITEM = \"ADD_ITEM\" as const;\nexport const DELETE_ITEM = \"DELETE_ITEM\" as const;\nexport const GET_ORDERED_INGREDIENTS = \"GET_ORDERED_INGREDIENTS\" as const;\n\nexport const MAKE_ORDER_REQUEST = \"MAKE_ORDER_REQUEST\" as const;\nexport const MAKE_ORDER_SUCCESS = \"MAKE_ORDER_SUCCESS\" as const;\nexport const MAKE_ORDER_FAILED = \"MAKE_ORDER_FAILED\" as const;\n\nexport const OPEN_ORDER_MODAL = \"OPEN_ORDER_MODAL\" as const;\nexport const CLOSE_ORDER_MODAL = \"CLOSE_ORDER_MODAL\" as const;\n\nexport const OPEN_MADE_ORDER_MODAL = \"OPEN_MADE_ORDER_MODAL\" as const;\nexport const CLOSE_MADE_ORDER_MODAL = \"CLOSE_MADE_ORDER_MODAL\" as const;\n\nexport const SWAP_INGREDIENTS = \"SWAP_INGREDIENTS\" as const;\n\nexport const makeOrder: (\n  orderedIngredients: OrderedIngredientsType\n) => (dispatch: AppDispatch) => void = (orderedIngredients) => {\n  return (dispatch) => {\n    dispatch({\n      type: MAKE_ORDER_REQUEST,\n    });\n    api\n      .makeOrder(\n        orderedIngredients.buns\n          .concat(orderedIngredients.filling)\n          .map((item) => {\n            return item._id;\n          })\n      )\n      .then((response) => {\n        if (response && response.success) {\n          dispatch({\n            type: MAKE_ORDER_SUCCESS,\n            orderId: response.order.number,\n          });\n          dispatch({ type: OPEN_ORDER_MODAL });\n        } else {\n          dispatch({ type: MAKE_ORDER_FAILED, error: \"\" });\n        }\n      })\n      .catch((error) => {\n        dispatch({ type: MAKE_ORDER_FAILED, error: error.message });\n      });\n  };\n};\n\nexport const closeOrderModal: () => (dispatch: AppDispatch) => void = () => {\n  return (dispatch) => {\n    dispatch({ type: CLOSE_ORDER_MODAL });\n  };\n};\n\nexport const closeMadeOrderModal: () => (dispatch: AppDispatch) => void =\n  () => {\n    return (dispatch) => {\n      dispatch({ type: CLOSE_MADE_ORDER_MODAL });\n    };\n  };\n","import { TOrderState } from \"./../../../types/types\";\nimport { TOrderActions } from \"./../../../types/action-types/order-types\";\nimport {\n  ADD_ITEM,\n  DELETE_ITEM,\n  MAKE_ORDER_REQUEST,\n  MAKE_ORDER_SUCCESS,\n  MAKE_ORDER_FAILED,\n  OPEN_ORDER_MODAL,\n  CLOSE_ORDER_MODAL,\n  SWAP_INGREDIENTS,\n  OPEN_MADE_ORDER_MODAL,\n  CLOSE_MADE_ORDER_MODAL,\n} from \"../../actions/order\";\n\nimport { v4 } from \"uuid\";\n\nconst initialState: TOrderState = {\n  totalPrice: 0,\n  orderedIngredients: {\n    buns: [{_id: '0',\n      price: 0,\n      name: '',\n      image: '',\n      type: \"bun\",\n      qty: 0,\n      }],\n    filling: [],\n  },\n  orderRequest: false,\n  orderFailed: false,\n  orderId: 0,\n  isOrderModalOpen: false,\n  isMadeOrderModalOpen: false,\n  error: \"\",\n};\n\nexport const orderReducer = (\n  state = initialState,\n  action: TOrderActions\n): TOrderState => {\n  switch (action.type) {\n    case ADD_ITEM: {\n      return {\n        ...state,\n        totalPrice:\n          state.totalPrice +\n          (action.item.type === \"bun\"\n            ? action.item.price * 2 - state.orderedIngredients.buns[0].price * 2\n            : action.item.price),\n        orderedIngredients: {\n          ...state.orderedIngredients,\n          buns:\n            action.item.type === \"bun\" &&\n            state.orderedIngredients.buns[0]._id !== action.item._id\n              ? [action.item, action.item]\n              : [...state.orderedIngredients.buns],\n          filling:\n            action.item.type !== \"bun\"\n              ? [\n                  ...state.orderedIngredients.filling,\n                  { ...action.item, uid: v4() },\n                ]\n              : [...state.orderedIngredients.filling],\n        },\n      };\n    }\n    case DELETE_ITEM: {\n      return {\n        ...state,\n        totalPrice: state.totalPrice - action.item.price,\n        orderedIngredients: {\n          ...state.orderedIngredients,\n          filling:\n            action.item.type !== \"bun\"\n              ? [...state.orderedIngredients.filling].filter(\n                  (item) => item.uid !== action.item.uid\n                )\n              : [...state.orderedIngredients.filling],\n        },\n      };\n    }\n    case MAKE_ORDER_REQUEST: {\n      return {\n        ...state,\n        orderRequest: true,\n        orderFailed: false,\n      };\n    }\n    case MAKE_ORDER_SUCCESS: {\n      return {\n        ...state,\n        orderRequest: false,\n        orderFailed: false,\n        orderId: action.orderId,\n        orderedIngredients: initialState.orderedIngredients,\n        totalPrice: initialState.totalPrice,\n      };\n    }\n    case MAKE_ORDER_FAILED: {\n      return {\n        ...state,\n        orderRequest: false,\n        orderFailed: true,\n        orderId: initialState.orderId,\n        error: action.error,\n      };\n    }\n    case OPEN_ORDER_MODAL: {\n      return {\n        ...state,\n        isOrderModalOpen: true,\n      };\n    }\n    case CLOSE_ORDER_MODAL: {\n      return {\n        ...state,\n        isOrderModalOpen: false,\n      };\n    }\n    case OPEN_MADE_ORDER_MODAL: {\n      return {\n        ...state,\n        isMadeOrderModalOpen: true,\n      };\n    }\n    case CLOSE_MADE_ORDER_MODAL: {\n      return {\n        ...state,\n        isMadeOrderModalOpen: false,\n      };\n    }\n    case SWAP_INGREDIENTS: {\n      return {\n        ...state,\n        orderedIngredients: {\n          ...state.orderedIngredients,\n          filling: [...action.filling],\n        },\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","import {\n  ILoginFormSetValue,\n  IForgotPasswordFormSetValue,\n  IResetPasswordFormSetValue,\n  IProfileFormSetValue,\n} from \"./../../types/action-types/user-types\";\nimport { IRegisterFormSetValue } from \"../../types/action-types/user-types\";\nimport api from \"../../utils/api\";\nimport { setTokens, deleteCookie } from \"../../utils/utils\";\nimport { AppDispatch, ThunkType, RootState } from \"../store\";\n\nexport const LOGIN_FORM_SET_VALUE = \"LOGIN_FORM_SET_VALUE\" as const;\nexport const REGISTER_FORM_SET_VALUE = \"REGISTER_FORM_SET_VALUE\" as const;\nexport const FORGOT_PASSWORD_FORM_SET_VALUE =\n  \"FORGOT_PASSWORD_FORM_SET_VALUE\" as const;\nexport const RESET_PASSWORD_FORM_SET_VALUE =\n  \"RESET_PASSWORD_FORM_SET_VALUE\" as const;\nexport const PROFILE_FORM_SET_VALUE = \"PROFILE_FORM_SET_VALUE\" as const;\n\nexport const LOGIN_FORM_SUBMIT = \"LOGIN_FORM_SUBMIT\" as const;\nexport const REGISTER_FORM_SUBMIT = \"REGISTER_FORM_SUBMIT\" as const;\nexport const FORGOT_PASSWORD_FORM_SUBMIT =\n  \"FORGOT_PASSWORD_FORM_SUBMIT\" as const;\nexport const RESET_PASSWORD_FORM_SUBMIT = \"RESET_PASSWORD_FORM_SUBMIT\" as const;\n\nexport const LOGIN_FORM_SUBMIT_SUCCESS = \"LOGIN_FORM_SUBMIT_SUCCESS\" as const;\nexport const REGISTER_FORM_SUBMIT_SUCCESS =\n  \"REGISTER_FORM_SUBMIT_SUCCESS\" as const;\nexport const FORGOT_PASSWORD_FORM_SUBMIT_SUCCESS =\n  \"FORGOT_PASSWORD_FORM_SUBMIT_SUCCESS\" as const;\nexport const RESET_PASSWORD_FORM_SUBMIT_SUCCESS =\n  \"RESET_PASSWORD_FORM_SUBMIT_SUCCESS\" as const;\n\nexport const LOGIN_FORM_SUBMIT_FAILED = \"LOGIN_FORM_SUBMIT_FAILED\" as const;\nexport const REGISTER_FORM_SUBMIT_FAILED =\n  \"REGISTER_FORM_SUBMIT_FAILED\" as const;\nexport const FORGOT_PASSWORD_FORM_SUBMIT_FAILED =\n  \"FORGOT_PASSWORD_FORM_SUBMIT_FAILED\" as const;\nexport const RESET_PASSWORD_FORM_SUBMIT_FAILED =\n  \"RESET_PASSWORD_FORM_SUBMIT_FAILED\" as const;\n\nexport const GET_USER_INFO_REQUEST = \"GET_USER_INFO_REQUEST\" as const;\nexport const GET_USER_INFO_FAILED = \"GET_USER_INFO_REQUEST_FAILED\" as const;\nexport const GET_USER_INFO_SUCCESS = \"GET_USER_INFO_REQUEST_SUCCESS\" as const;\n\nexport const UPDATE_USER_INFO_REQUEST = \"UPDATE_USER_INFO_REQUEST\" as const;\nexport const UPDATE_USER_INFO_FAILED =\n  \"UPDATE_USER_INFO_REQUEST_FAILED\" as const;\nexport const UPDATE_USER_INFO_SUCCESS =\n  \"UPDATE_USER_INFO_REQUEST_SUCCESS\" as const;\nexport const CLOSE_UPDATE_INFO_MODAL = \"CLOSE_UPDATE_INFO_MODAL\" as const;\n\nexport const LOGOUT_REQUEST = \"LOGOUT_REQUEST\" as const;\nexport const LOGOUT_REQUEST_SUCCESS = \"LOGOUT_REQUEST_SUCCESS\" as const;\nexport const LOGOUT_REQUEST_FAILED = \"LOGOUT_REQUEST_FAILED\" as const;\n\nexport const setLoginFormValue = (\n  field: string,\n  value: string\n): ILoginFormSetValue => ({\n  type: LOGIN_FORM_SET_VALUE,\n  field,\n  value,\n});\n\nexport const setRegisterFormValue = (\n  field: string,\n  value: string\n): IRegisterFormSetValue => ({\n  type: REGISTER_FORM_SET_VALUE,\n  field,\n  value,\n});\n\nexport const setForgotPasswordFormValue = (\n  field: string,\n  value: string\n): IForgotPasswordFormSetValue => ({\n  type: FORGOT_PASSWORD_FORM_SET_VALUE,\n  field,\n  value,\n});\n\nexport const setResetPasswordFormValue = (\n  field: string,\n  value: string\n): IResetPasswordFormSetValue => ({\n  type: RESET_PASSWORD_FORM_SET_VALUE,\n  field,\n  value,\n});\n\nexport const setProfileFormValue = (\n  field: string,\n  value: string\n): IProfileFormSetValue => ({\n  type: PROFILE_FORM_SET_VALUE,\n  field,\n  value,\n});\n\nexport const registerFormSubmit:ThunkType = () => {\n  return (dispatch: AppDispatch, getState: () => RootState) => {\n    dispatch({\n      type: REGISTER_FORM_SUBMIT,\n    });\n    const { name, email, password } = getState().user.registerForm;\n    api\n      .register(name, email, password)\n      .then((data) => {\n        setTokens(data);\n        dispatch({\n          type: REGISTER_FORM_SUBMIT_SUCCESS,\n          data,\n        });\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({\n          type: REGISTER_FORM_SUBMIT_FAILED,\n        });\n      });\n  };\n};\n\nexport const loginFormSubmit: ThunkType = () => {\n  return (dispatch: AppDispatch, getState: () => RootState) => {\n    dispatch({\n      type: LOGIN_FORM_SUBMIT,\n    });\n    const { email, password } = getState().user.loginForm;\n    api\n      .login(email, password)\n      .then((data) => {\n        setTokens(data);\n        dispatch({ type: LOGIN_FORM_SUBMIT_SUCCESS, data });\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({ type: LOGIN_FORM_SUBMIT_FAILED });\n      });\n  };\n};\n\nexport const forgotPasswordFormSubmit: ThunkType = () => {\n  return (dispatch: AppDispatch, getState: ()=> RootState) => {\n    dispatch({\n      type: FORGOT_PASSWORD_FORM_SUBMIT,\n    });\n    const { email } = getState().user.forgotPasswordForm;\n    api\n      .requestResetPassword(email)\n      .then((data) => {\n        dispatch({ type: FORGOT_PASSWORD_FORM_SUBMIT_SUCCESS });\n        localStorage.setItem(\"emailSent\", JSON.stringify(true));\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({ type: FORGOT_PASSWORD_FORM_SUBMIT_FAILED });\n      });\n  };\n};\n\nexport const resetPasswordFormSubmit: ThunkType = () => {\n  return (dispatch: AppDispatch, getState: () => RootState) => {\n    dispatch({\n      type: RESET_PASSWORD_FORM_SUBMIT,\n    });\n    const { newPassword, token } = getState().user.resetPasswordForm;\n    api\n      .resetPassword(newPassword, token)\n      .then((data) => {\n        dispatch({ type: RESET_PASSWORD_FORM_SUBMIT_SUCCESS });\n        localStorage.removeItem(\"emailSent\");\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({ type: RESET_PASSWORD_FORM_SUBMIT_FAILED });\n      });\n  };\n};\n\nexport const logout: ThunkType = () => {\n  return (dispatch: AppDispatch) => {\n    dispatch({\n      type: LOGOUT_REQUEST,\n    });\n    api\n      .logout()\n      .then((res) => {\n        deleteCookie(\"token\");\n        deleteCookie(\"refreshToken\");\n        dispatch({ type: LOGOUT_REQUEST_SUCCESS });\n      })\n      .catch((error) => {\n        console.log(error);\n        dispatch({ type: LOGOUT_REQUEST_FAILED });\n      });\n  };\n};\n\nconst handleTokenExpire: (\n  error: { message: string },\n  dispatch: AppDispatch,\n  repeatRequestAfterRefresh: ThunkType\n) => void = (error, dispatch, repeatRequestAfterRefresh) => {\n  if (error.message === \"Ошибка: 403\" || error.message === \"Ошибка: 401\") {\n    api\n      .refreshToken()\n      .then((data) => {\n        setTokens(data);\n        dispatch(repeatRequestAfterRefresh);\n      })\n      .catch((error) => console.log(error));\n  }\n};\n\nexport const getUserInfo: ThunkType = () => {\n  return (dispatch: AppDispatch) => {\n    dispatch({ type: GET_USER_INFO_REQUEST });\n    api\n      .getUserInfo()\n      .then((data) => {\n        dispatch({ type: GET_USER_INFO_SUCCESS, user: data.user });\n      })\n      .catch((error) => {\n        console.log(error.message);\n        handleTokenExpire(error, dispatch, getUserInfo);\n        dispatch({ type: GET_USER_INFO_FAILED });\n      });\n  };\n};\n\nexport const updateUserInfo: ThunkType = () => {\n  return (dispatch: AppDispatch, getState: () => RootState) => {\n    dispatch({ type: UPDATE_USER_INFO_REQUEST });\n    const { name, email, password } = getState().user.profileForm;\n    api\n      .updateUserInfo(name, email, password)\n      .then((data) => {\n        dispatch({ type: UPDATE_USER_INFO_SUCCESS, user: data.user });\n      })\n      .catch((error) => {\n        console.log(error.message);\n        handleTokenExpire(error, dispatch, updateUserInfo);\n        dispatch({ type: UPDATE_USER_INFO_FAILED });\n      });\n  };\n};\n","import { TUserActions } from './../../../types/action-types/user-types';\nimport { TUserState } from './../../../types/types';\nimport {\n  LOGIN_FORM_SET_VALUE,\n  REGISTER_FORM_SET_VALUE,\n  FORGOT_PASSWORD_FORM_SET_VALUE,\n  PROFILE_FORM_SET_VALUE,\n  RESET_PASSWORD_FORM_SET_VALUE,\n  REGISTER_FORM_SUBMIT,\n  REGISTER_FORM_SUBMIT_SUCCESS,\n  REGISTER_FORM_SUBMIT_FAILED,\n  LOGIN_FORM_SUBMIT,\n  LOGIN_FORM_SUBMIT_SUCCESS,\n  LOGIN_FORM_SUBMIT_FAILED,\n  FORGOT_PASSWORD_FORM_SUBMIT,\n  FORGOT_PASSWORD_FORM_SUBMIT_SUCCESS,\n  FORGOT_PASSWORD_FORM_SUBMIT_FAILED,\n  RESET_PASSWORD_FORM_SUBMIT,\n  RESET_PASSWORD_FORM_SUBMIT_SUCCESS,\n  RESET_PASSWORD_FORM_SUBMIT_FAILED,\n  GET_USER_INFO_REQUEST,\n  GET_USER_INFO_FAILED,\n  GET_USER_INFO_SUCCESS,\n  LOGOUT_REQUEST,\n  LOGOUT_REQUEST_SUCCESS,\n  LOGOUT_REQUEST_FAILED,\n  UPDATE_USER_INFO_REQUEST,\n  UPDATE_USER_INFO_SUCCESS,\n  UPDATE_USER_INFO_FAILED,\n  CLOSE_UPDATE_INFO_MODAL,\n} from \"../../actions/user\";\n\nconst initialState:TUserState = {\n  user: {email:\"\", name: \"\"},\n  loginForm: {\n    email: \"\",\n    password: \"\",\n  },\n  registerForm: {\n    email: \"\",\n    password: \"\",\n    name: \"\",\n  },\n  forgotPasswordForm: {\n    email: \"\",\n  },\n  resetPasswordForm: {\n    newPassword: \"\",\n    token: \"\",\n  },\n  profileForm: {\n    email: \"\",\n    password: \"\",\n    name: \"\",\n  },\n  registrationRequest: false,\n  registrationFailed: false,\n  loginRequest: false,\n  loginFailed: false,\n  forgotPasswordRequest: false,\n  forgotPasswordFailed: false,\n  emailSent: false,\n  resetPasswordRequest: false,\n  resetPasswordFailed: false,\n  resetSuccess: false,\n  userInfoRequest: false,\n  userInfoFailed: false,\n  updateSuccess: false,\n  updateUserInfoRequest: false,\n  updateUserInfoRequestFailed: false,\n  logoutRequest: false,\n  logoutRequestFailed: false,\n};\n\nexport const userInfoReducer = (state = initialState, action: TUserActions): TUserState => {\n  switch (action.type) {\n    case LOGIN_FORM_SET_VALUE: {\n      return {\n        ...state,\n        loginForm: {\n          ...state.loginForm,\n          [action.field]: action.value,\n        },\n      };\n    }\n    case REGISTER_FORM_SET_VALUE: {\n      return {\n        ...state,\n        registerForm: {\n          ...state.registerForm,\n          [action.field]: action.value,\n        },\n      };\n    }\n    case FORGOT_PASSWORD_FORM_SET_VALUE: {\n      return {\n        ...state,\n        forgotPasswordForm: {\n          ...state.forgotPasswordForm,\n          [action.field]: action.value,\n        },\n      };\n    }\n    case RESET_PASSWORD_FORM_SET_VALUE: {\n      return {\n        ...state,\n        resetPasswordForm: {\n          ...state.resetPasswordForm,\n          [action.field]: action.value,\n        },\n      };\n    }\n    case PROFILE_FORM_SET_VALUE: {\n      return {\n        ...state,\n        profileForm: {\n          ...state.profileForm,\n          [action.field]: action.value,\n        },\n      };\n    }\n    case REGISTER_FORM_SUBMIT: {\n      return {\n        ...state,\n        registrationRequest: true,\n        registrationFailed: false,\n      };\n    }\n    case REGISTER_FORM_SUBMIT_SUCCESS: {\n      return {\n        ...state,\n        registrationRequest: false,\n        registrationFailed: false,\n        registerForm: {\n          ...initialState.registerForm,\n        },\n        user: action.data.user,\n      };\n    }\n    case REGISTER_FORM_SUBMIT_FAILED: {\n      return {\n        ...state,\n        registrationRequest: false,\n        registrationFailed: false,\n      };\n    }\n    case LOGIN_FORM_SUBMIT: {\n      return {\n        ...state,\n        loginRequest: true,\n        loginFailed: false,\n      };\n    }\n    case LOGIN_FORM_SUBMIT_SUCCESS: {\n      return {\n        ...state,\n        loginRequest: false,\n        loginFailed: false,\n        loginForm: {\n          ...initialState.loginForm,\n        },\n        user: action.data.user,\n      };\n    }\n    case LOGIN_FORM_SUBMIT_FAILED: {\n      return {\n        ...state,\n        loginRequest: false,\n        loginFailed: false,\n      };\n    }\n    case FORGOT_PASSWORD_FORM_SUBMIT: {\n      return {\n        ...state,\n        forgotPasswordRequest: true,\n        forgotPasswordFailed: false,\n        emailSent: false,\n      };\n    }\n    case FORGOT_PASSWORD_FORM_SUBMIT_SUCCESS: {\n      return {\n        ...state,\n        forgotPasswordRequest: false,\n        forgotPasswordFailed: false,\n        forgotPasswordForm: {\n          ...initialState.forgotPasswordForm,\n        },\n        emailSent: true,\n      };\n    }\n    case FORGOT_PASSWORD_FORM_SUBMIT_FAILED: {\n      return {\n        ...state,\n        forgotPasswordRequest: false,\n        forgotPasswordFailed: false,\n        emailSent: false,\n      };\n    }\n    case RESET_PASSWORD_FORM_SUBMIT: {\n      return {\n        ...state,\n        resetPasswordRequest: true,\n        resetPasswordFailed: false,\n        resetSuccess: false,\n      };\n    }\n    case RESET_PASSWORD_FORM_SUBMIT_SUCCESS: {\n      return {\n        ...state,\n        resetPasswordRequest: false,\n        resetPasswordFailed: false,\n        resetPasswordForm: {\n          ...initialState.resetPasswordForm,\n        },\n        resetSuccess: true,\n      };\n    }\n    case RESET_PASSWORD_FORM_SUBMIT_FAILED: {\n      return {\n        ...state,\n        resetPasswordRequest: false,\n        resetPasswordFailed: false,\n        resetSuccess: false,\n      };\n    }\n    case GET_USER_INFO_REQUEST: {\n      return {\n        ...state,\n        userInfoFailed: false,\n        userInfoRequest: true,\n      };\n    }\n    case GET_USER_INFO_SUCCESS: {\n      return {\n        ...state,\n        userInfoFailed: false,\n        userInfoRequest: false,\n        user: action.user,\n        profileForm: {\n          ...state.profileForm,\n          name: action.user.name,\n          email: action.user.email,\n        },\n      };\n    }\n    case GET_USER_INFO_FAILED: {\n      return {\n        ...state,\n        userInfoFailed: true,\n        userInfoRequest: false,\n      };\n    }\n    case UPDATE_USER_INFO_REQUEST: {\n      return {\n        ...state,\n        updateUserInfoRequestFailed: false,\n        updateUserInfoRequest: true,\n        updateSuccess: false,\n      };\n    }\n    case UPDATE_USER_INFO_SUCCESS: {\n      return {\n        ...state,\n        updateUserInfoRequestFailed: false,\n        updateUserInfoRequest: false,\n        user: action.user,\n        profileForm: {\n          ...state.profileForm,\n          name: action.user.name,\n          email: action.user.email,\n        },\n        updateSuccess: true,\n      };\n    }\n    case UPDATE_USER_INFO_FAILED: {\n      return {\n        ...state,\n        updateUserInfoRequestFailed: true,\n        updateUserInfoRequest: false,\n        updateSuccess: false,\n      };\n    }\n    case CLOSE_UPDATE_INFO_MODAL: {\n      return {\n        ...state,\n        updateSuccess: false,\n      };\n    }\n    case LOGOUT_REQUEST: {\n      return {\n        ...state,\n        logoutRequest: true,\n        logoutRequestFailed: false,\n      };\n    }\n    case LOGOUT_REQUEST_SUCCESS: {\n      return {\n        ...state,\n        user: initialState.user,\n        logoutRequest: false,\n        logoutRequestFailed: false,\n      };\n    }\n    case LOGOUT_REQUEST_FAILED: {\n      return {\n        ...state,\n        logoutRequest: false,\n        logoutRequestFailed: true,\n      };\n    }\n    default: {\n      return state;\n    }\n  }\n};\n","export const WS_CONNECTION_START = \"WS_CONNECTION_START\" as const;\nexport const WS_CONNECTION_SUCCESS = \"WS_CONNECTION_SUCCESS\" as const;\nexport const WS_CONNECTION_ERROR = \"WS_CONNECTION_ERROR\" as const;\nexport const WS_CONNECTION_CLOSED = \"WS_CONNECTION_CLOSED\" as const;\nexport const WS_GET_ORDERS = \"WS_GET_MESSAGE\" as const;\nexport const WS_SEND_MESSAGE = \"WS_SEND_MESSAGE\" as const;\n\nexport const wsConnectionSuccess = () => {\n  return {\n    type: WS_CONNECTION_SUCCESS,\n  };\n};\n\nexport const wsConnectionError = () => {\n  return {\n    type: WS_CONNECTION_ERROR,\n  };\n};\n\nexport const wsConnectionClosed = () => {\n  return {\n    type: WS_CONNECTION_CLOSED,\n  };\n};\n\nexport const wsGetOrders = (message: string) => {\n  return {\n    type: WS_GET_ORDERS,\n    payload: message,\n  };\n};\n","import { TWsState } from \"./../../../types/types\";\nimport { TWsActions } from \"./../../../types/action-types/ws-types\";\nimport {\n  WS_CONNECTION_SUCCESS,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_CLOSED,\n  WS_GET_ORDERS,\n  WS_CONNECTION_START\n} from \"../../actions/ws\";\n\nconst initialState: TWsState = {\n  wsConnected: false,\n  wsStarted: false,\n  orders: [],\n  totalOrdersCount: 0,\n  todayOrdersCount: 0,\n};\n\nexport const wsReducer = (\n  state = initialState,\n  action: TWsActions\n): TWsState => {\n  switch (action.type) {\n    case WS_CONNECTION_START:\n      return {\n        ...state,\n        wsStarted: true,\n      };\n\n    case WS_CONNECTION_SUCCESS:\n      return {\n        ...state,\n        wsConnected: true,\n      };\n\n    case WS_CONNECTION_ERROR:\n      return {\n        ...state,\n        wsConnected: false,\n        wsStarted: false,\n      };\n\n    case WS_CONNECTION_CLOSED:\n      return {\n        ...initialState,\n        wsConnected: false,\n        wsStarted: false,\n      };\n\n    case WS_GET_ORDERS:\n      return {\n        ...state,\n        orders:\n          action.orders.orders && action.orders.orders.length\n            ? [...action.orders.orders]\n            : [],\n        totalOrdersCount: action.orders.total,\n        todayOrdersCount: action.orders.totalToday,\n      };\n\n    default: {\n      return state;\n    }\n  }\n};\n","import { combineReducers } from \"redux\";\nimport {ingredientsReducer} from './ingredients/ingredients';\nimport {orderReducer} from './order/order';\nimport {userInfoReducer} from './user/user';\nimport {wsReducer} from './ws/ws';\n\nexport const rootReducer = combineReducers({\n  order: orderReducer,\n  ingredients: ingredientsReducer,\n  user: userInfoReducer,\n  ws: wsReducer,\n});\n","import { AnyAction } from 'redux';\nimport {\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_GET_ORDERS,\n  WS_SEND_MESSAGE,\n} from \"./../actions/ws\";\nimport { AppDispatch } from \"./../store\";\nimport { getCookie } from \"../../utils/utils\";\n\nexport const socketMiddleware = (\n  wsUrl: string,\n  wsActions: {\n    wsInit: typeof WS_CONNECTION_START;\n    wsSendMessage: typeof WS_SEND_MESSAGE;\n    onOpen: typeof WS_CONNECTION_SUCCESS;\n    onClose: typeof WS_CONNECTION_CLOSED;\n    onError: typeof WS_CONNECTION_ERROR;\n    onMessage: typeof WS_GET_ORDERS;\n  }\n) => {\n  return (store: { dispatch: AppDispatch }) => {\n    let socket: WebSocket | null = null;\n\n    return (next: (action: AnyAction)=> void) => (action: { type: string; payload: string }) => {\n      const { dispatch } = store;\n      const { type, payload } = action;\n      const { wsInit, wsSendMessage, onOpen, onClose, onError, onMessage } =\n        wsActions;\n      const token = getCookie(\"token\");\n\n      if (type === wsInit) {\n        socket =\n          token && payload === \"withAuth\"\n            ? new WebSocket(`${wsUrl}?token=${token}`)\n            : new WebSocket(`${wsUrl}/all`);\n      }\n\n      if (socket) {\n        socket.onopen = (event: Event) => {\n          dispatch({ type: onOpen, payload: event });\n        };\n\n        socket.onerror = (event: Event) => {\n          dispatch({ type: onError, payload: event });\n        };\n\n        socket.onmessage = (event: MessageEvent) => {\n          const { data } = event;\n          const parsedData = JSON.parse(data);\n          const { success, ...restParsedData } = parsedData;\n          dispatch({ type: onMessage, orders: restParsedData });\n        };\n\n        socket.onclose = (event) => {\n          dispatch({ type: onClose, payload: event });\n        };\n      }\n\n      if (type === wsSendMessage) {\n        const message = { ...(payload as any), token: token };\n        socket?.send(JSON.stringify(message));\n      }\n\n      next(action);\n    };\n  };\n};\n","import { TUserActions } from './../types/action-types/user-types';\nimport { TOrderActions } from './../types/action-types/order-types';\nimport { TIngredientsActions } from './../types/action-types/ingredient-types';\nimport { TWsActions } from './../types/action-types/ws-types';\nimport { wsUrl } from './../utils/constants';\nimport { applyMiddleware, createStore, compose, AnyAction, Dispatch } from \"redux\";\nimport { rootReducer } from \"./reducers\";\nimport { socketMiddleware } from \"./middlewares/socketMiddleware\";\nimport thunkMiddleware from \"redux-thunk\";\nimport {\n  WS_CONNECTION_CLOSED,\n  WS_CONNECTION_ERROR,\n  WS_CONNECTION_START,\n  WS_CONNECTION_SUCCESS,\n  WS_GET_ORDERS,\n  WS_SEND_MESSAGE,\n} from \"./actions/ws\";\nimport { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\nimport {Action, ActionCreator} from 'redux';\nimport {ThunkAction} from 'redux-thunk';\nimport { SetStateAction } from 'react';\n\nconst wsActions = {\n  wsInit: WS_CONNECTION_START,\n  onOpen: WS_CONNECTION_SUCCESS,\n  onClose: WS_CONNECTION_CLOSED,\n  onError: WS_CONNECTION_ERROR,\n  onMessage: WS_GET_ORDERS,\n  wsSendMessage: WS_SEND_MESSAGE\n};\ndeclare global {\n  interface Window {\n    __REDUX_DEVTOOLS_EXTENSION_COMPOSE__?: typeof compose;\n  }\n}\nconst composeEnhancers =\n  typeof window === \"object\" && window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    ? window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__\n    : compose;\n\nexport const initStore = (initialState = {}) =>\n  createStore(\n    rootReducer,\n    initialState,\n    composeEnhancers(\n      applyMiddleware(thunkMiddleware, socketMiddleware(wsUrl, wsActions))\n    )\n  );\n\nconst store = initStore();\n\nexport type RootState = ReturnType<typeof store.getState>;\nexport type TAppState = ReturnType<typeof rootReducer>;\nexport type AppDispatch = Dispatch<SetStateAction<any>>;\nexport const useAppDispatch = () => useDispatch<AppDispatch>()\nexport const useSelectorHook:TypedUseSelectorHook<RootState> = useSelector;\nexport type ThunkType = ActionCreator<ThunkAction<Promise<Action>, RootState, void, AnyAction>> | (() => (dispatch: AppDispatch, getState: () => RootState) => void);\nexport type TActions = TWsActions | TIngredientsActions | TOrderActions | TUserActions | ThunkType;\n\nexport default store;","import classNames from \"classnames\";\nimport React, { FC } from \"react\";\nimport styles from \"./ingredient-details.module.css\";\nimport { useSelectorHook } from \"../../services/store\";\nimport { IngredientType } from \"../../types/types\";\nimport { useParams } from \"react-router\";\n\nconst IngredientDetails:FC = () => {\n  const ingredients = useSelectorHook((store) => store.ingredients.ingredients);\n  const { id } = useParams<{ id?: string }>();\n  const item = ingredients.find((item: IngredientType) => item._id === id);\n  const nameClassName = classNames(\n    styles.name,\n    \"text text_type_main-medium\",\n    \"mt-4\"\n  );\n  const textClassName = classNames(styles.text, \"text text_type_main-default\");\n  const digitClassName = classNames(\n    styles.text,\n    \"text text_type_digits-default\"\n  );\n  return (\n    <div className={styles.details}>\n      <img className={styles.image} src={item && item.image ? item.image : ''} alt={item && item.name ? item.name : ''} />\n      <p className={nameClassName}>{item && item.name ? item.name : ''}</p>\n      <div className={styles.nutritionalValue}>\n        <p className={textClassName}>Калории, ккал</p>\n        <p className={digitClassName}>{item && item.calories ? item.calories : 0}</p>\n      </div>\n      <div className={styles.nutritionalValue}>\n        <p className={textClassName}>Белки, г</p>\n        <p className={digitClassName}>{item && item.proteins ? item.proteins : 0}</p>\n      </div>\n      <div className={styles.nutritionalValue}>\n        <p className={textClassName}>Жиры, г</p>\n        <p className={digitClassName}>{item && item.fat ? item.fat : 0}</p>\n      </div>\n      <div className={styles.nutritionalValue}>\n        <p className={textClassName}>Углеводы, г</p>\n        <p className={digitClassName}>{item && item.carbohydrates ? item.carbohydrates : 0}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default IngredientDetails;\n","export default __webpack_public_path__ + \"static/media/done.df2db76e.svg\";","import React, { FC } from \"react\";\nimport styles from \"./order-details.module.css\";\nimport classNames from \"classnames\";\nimport done from \"../../images/done.svg\";\nimport { useSelectorHook } from \"../../services/store\";\n\nconst OrderDetails:FC = () => {\n  const {orderId} = useSelectorHook((store) => store.order);\n  const idClassName = classNames(\n    styles.id,\n    \"text text_type_digits-large\",\n    \"mt-4\"\n  );\n  const textClassName = classNames(\n    styles.info,\n    \"mb-2\",\n    \"text text_type_main-default\"\n  );\n  const titleClassName = classNames(styles.title, \"text text_type_main-medium\");\n  return (\n    <div className={styles.order}>\n      <p className={idClassName}>{orderId}</p>\n      <p className={titleClassName}>идентификатор заказа</p>\n      <img className={styles.image} src={done} alt=\"Готовность заказа.\" />\n      <p className={textClassName}>Ваш заказ начали готовить</p>\n      <p className={textClassName}>\n        Дождитесь готовности на орбитальной станции\n      </p>\n    </div>\n  );\n};\n\nexport default OrderDetails;\n","import React, { FC } from \"react\";\nimport bunStyles from \"./bun.module.css\";\nimport { ConstructorElement } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { bottomBunLabel, topBunLabel } from \"../../utils/constants\";\nimport { useSelectorHook } from \"../../services/store\";\n\nconst Bun: FC<{ top: boolean }> = ({top}) => {\n  const bun =\n    useSelectorHook((store) => store.order.orderedIngredients.buns[0]);\n  return (\n    <div className={bunStyles.bun}>\n      {bun && bun.name && (\n        <ConstructorElement\n          type={top ? \"top\" : \"bottom\"}\n          isLocked={true}\n          text={\n            bun.name +\n            (top ? topBunLabel : bottomBunLabel)\n          }\n          price={bun.price}\n          thumbnail={bun.image}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Bun;\n","import {\n  ConstructorElement,\n  DragIcon,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport React, { FC, useRef } from \"react\";\nimport { MonitorEventEmitter, useDrag, useDrop } from \"react-dnd\";\nimport { DECREASE_COUNT } from \"../../services/actions/ingredients\";\nimport { DELETE_ITEM } from \"../../services/actions/order\";\nimport styles from \"./filling-item.module.css\";\nimport { IFillingItem, IngredientType } from \"../../types/types\";\nimport { useAppDispatch } from \"../../services/store\";\n\nconst FillingItem: FC<IFillingItem> = ({ index, swapIngredients, item }) => {\n  const ref = useRef<HTMLLIElement>(null);\n  const { name, _id, uid, image, price } = item;\n  const dispatch = useAppDispatch();\n  const [{ isDragging }, drag] = useDrag({\n    type: \"ingredient1\",\n    item: () => {\n      return { _id, index };\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n  const [{ isHover }, drop] = useDrop({\n    accept: \"ingredient1\",\n    collect: (monitor) => ({\n      isHover: monitor.isOver(),\n    }),\n    hover(item: { _id: string; index: number }, monitor: MonitorEventEmitter) {\n      const dragIndex = item.index;\n      const hoverIndex = index;\n      if (!ref.current) {\n        return;\n      }\n      if (dragIndex === hoverIndex) {\n        return;\n      }\n\n      swapIngredients(dragIndex, hoverIndex);\n      item.index = hoverIndex;\n    },\n  });\n\n  drag(drop(ref));\n\n  const handleItemDelete = (deletedItem: {_id: string; price: number; uid: string | undefined;}) => {\n    dispatch({ type: DELETE_ITEM, item: deletedItem as IngredientType});\n    dispatch({ type: DECREASE_COUNT, item: deletedItem as IngredientType });\n  };\n\n  return (\n    <li\n      className={styles.constructorElement}\n      ref={ref}\n      style={isHover || isDragging ? { opacity: 0 } : { opacity: 1 }}\n      draggable\n    >\n      <DragIcon type=\"primary\" />\n      <ConstructorElement\n        text={name}\n        price={price}\n        thumbnail={image}\n        handleClose={() => handleItemDelete({ _id, price, uid })}\n      />\n    </li>\n  );\n};\n\nexport default FillingItem;\n","import React, { useMemo, useCallback, FC } from \"react\";\nimport styles from \"./burger-constructor.module.css\";\nimport {\n  CurrencyIcon,\n  Button,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport classNames from \"classnames\";\nimport {\n  ADD_ITEM,\n  makeOrder,\n  SWAP_INGREDIENTS,\n} from \"../../services/actions/order\";\nimport Bun from \"../bun/bun\";\nimport { useDrop } from \"react-dnd\";\nimport FillingItem from \"../filling-item/filling-item\";\nimport {\n  INCREASE_COUNT,\n  RESET_COUNT,\n} from \"../../services/actions/ingredients\";\nimport { useHistory } from \"react-router-dom\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { IngredientType, OrderedIngredientsType } from \"../../types/types\";\n\nconst BurgerConstructor: FC = () => {\n  const { orderedIngredients, totalPrice, orderRequest } = useSelectorHook(\n    (store) =>\n      store.order as {\n        orderedIngredients: OrderedIngredientsType;\n        totalPrice: number;\n        orderRequest: boolean;\n      }\n  );\n  const user = useSelectorHook((store) => store.user.user);\n  const history = useHistory();\n\n  const dispatch = useAppDispatch();\n\n  const [{ isHover }, dropRef] = useDrop({\n    accept: \"ingredient\",\n    collect: (monitor) => ({\n      isHover: monitor.isOver(),\n    }),\n    drop(item: IngredientType) {\n      dispatch({ type: ADD_ITEM, item });\n      dispatch({ type: INCREASE_COUNT, item });\n    },\n  });\n  const digitClassName = classNames(\"text text_type_digits-medium\", \"mr-2\");\n  const containerClassName = classNames(\n    styles.burgerConstructor,\n    `${isHover && styles.hoveredContainer}`\n  );\n  const handleMakeOrderClick = () => {\n    if (!user.name) {\n      history.replace({ pathname: \"/login\" });\n    } else {\n      dispatch({ type: RESET_COUNT });\n      console.log(orderedIngredients);\n      dispatch(makeOrder(orderedIngredients));\n    }\n  };\n\n  const swapIngredients = useCallback(\n    (dragIndex: number, hoverIndex: number) => {\n      const draggedItem = orderedIngredients.filling[dragIndex];\n      const swappedFilling = [...orderedIngredients.filling];\n      swappedFilling.splice(dragIndex, 1);\n      swappedFilling.splice(hoverIndex, 0, draggedItem);\n      dispatch({ type: SWAP_INGREDIENTS, filling: swappedFilling });\n    },\n    [dispatch, orderedIngredients.filling]\n  );\n\n  const content = useMemo<false | JSX.Element[]>(() => {\n    return (\n      orderedIngredients.filling &&\n      orderedIngredients.filling.length > 0 &&\n      orderedIngredients.filling.map((item: IngredientType, index: number) => {\n        return (\n          <FillingItem\n            key={item.uid}\n            index={index}\n            swapIngredients={swapIngredients}\n            item={item}\n          />\n        );\n      })\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [orderedIngredients]);\n\n  return !orderRequest ? (\n    <section className={containerClassName} ref={dropRef} id=\"drop-area\">\n      <Bun top />\n      <ul className={styles.list}>{content}</ul>\n      <Bun top={false} />\n      {(orderedIngredients.filling.length ||\n        orderedIngredients.buns.length > 1) && (\n        <div className={styles.makeOrderInfo}>\n          <div className={styles.price}>\n            <p className={digitClassName}>{totalPrice}</p>\n            <CurrencyIcon type=\"primary\" />\n          </div>\n          <Button type=\"primary\" size=\"large\" onClick={handleMakeOrderClick}>\n            Оформить заказ\n          </Button>\n        </div>\n      )}\n    </section>\n  ) : (\n    <p\n      style={{\n        minHeight: 760,\n        marginTop: 100,\n        display: \"flex\",\n        alignItems: \"center\",\n        justifyContent: \"center\",\n        width: 600,\n      }}\n    >\n      Loading...\n    </p>\n  );\n};\n\nexport default BurgerConstructor;\n","import React, { FC } from \"react\";\nimport classNames from \"classnames\";\nimport styles from \"./ingredient-item.module.css\";\nimport {\n  CurrencyIcon,\n  Counter,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {\n  GET_INGREDIENT_DETAILS,\n  OPEN_INGREDIENT_MODAL,\n} from \"../../services/actions/ingredients\";\nimport { useDrag } from \"react-dnd\";\nimport { NavLink, useLocation } from \"react-router-dom\";\nimport { IngredientType, LocationState } from \"../../types/types\";\nimport { useAppDispatch } from \"../../services/store\";\n\nconst IngredientItem: FC<{item:IngredientType}> = ({ item }) => {\n  const dispatch = useAppDispatch();\n  const location = useLocation<LocationState>();\n  const [{ isDragging }, dragRef] = useDrag({\n    type: \"ingredient\",\n    item: () => {\n      return item;\n    },\n    collect: (monitor) => ({\n      isDragging: monitor.isDragging(),\n    }),\n  });\n\n  const cardClassName = classNames(\n    styles.card,\n    `${isDragging && styles.dragCard}`\n  );\n  const textClassName = classNames(styles.text, \"text text_type_main-default\");\n  const digitClassName = classNames(\n    \"text text_type_digits-default\",\n    styles.digit,\n    \"mt-1 mb-1\"\n  );\n  const handleCardClick = () => {\n    dispatch({ type: OPEN_INGREDIENT_MODAL });\n    dispatch({ type: GET_INGREDIENT_DETAILS, item });\n  };\n  \n  return (\n    <NavLink\n      to={{pathname: `/ingredients/${item._id}`, state: {background: location}}}\n      className={cardClassName}\n      onClick={handleCardClick}\n      ref={dragRef}\n      draggable\n      id=\"ingredient\"\n    >\n      {(item.qty > 0) && (<Counter count={item.qty} size=\"default\" />)}\n      <img src={item.image} alt={item.name} />\n      <div className={styles.price}>\n        <p className={digitClassName}>{item.price}</p>\n        <CurrencyIcon type=\"primary\" />\n      </div>\n      <p className={textClassName}>{item.name}</p>\n    </NavLink>\n  );\n};\n\nexport default IngredientItem;\n","import React, { FC } from \"react\";\nimport IngredientItem from \"../ingredient-item/ingredient-item\";\nimport styles from \"./ingredients-list.module.css\";\nimport classNames from \"classnames\";\nimport { IIngredientList, IngredientType } from \"../../types/types\";\n\nconst IngredientsList:FC<IIngredientList> = ({\n  anchorId,\n  title,\n  data,\n}) => {\n  const titleClassName = classNames(\"text text_type_main-medium\", styles.title);\n\n  return (\n    <div className={styles.ingredients} id={anchorId}>\n      <h2 className={titleClassName}>{title}</h2>\n      <ul className={styles.list}>\n        {data.map((item: IngredientType, index: number) => {\n          return (\n            <IngredientItem\n              item={item}\n              key={item._id + index}\n            />\n          );\n        })}\n      </ul>\n    </div>\n  );\n};\n\nexport default IngredientsList;\n","import React, { FC, SyntheticEvent, useMemo } from \"react\";\nimport styles from \"./burger-ingredients.module.css\";\nimport classNames from \"classnames\";\nimport IngredientsList from \"../ingredients-list/ingredients-list\";\nimport { Tab } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { TAB_SWITCH } from \"../../services/actions/ingredients\";\nimport {  useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { IngredientType } from \"../../types/types\";\n\nconst BurgerIngredients: FC = () => {\n  const dispatch = useAppDispatch();\n  const titleClassName = classNames(styles.title, \"text text_type_main-large\");\n  const { data, currentTab } = useSelectorHook((store) => ({\n    data: store.ingredients.ingredients,\n    currentTab: store.ingredients.currentTab,\n  }));\n\n  const handleScroll = () => {\n    const scrollableList = document.getElementById(\"scrollable-list\");\n    const bunArea = document.getElementById(\"type-bun\");\n    const sauceArea = document.getElementById(\"type-sauce\");\n    const mainArea = document.getElementById(\"type-main\");\n\n    if (bunArea && mainArea && sauceArea && scrollableList) {\n      let value = scrollableList.getBoundingClientRect().top;\n      if (\n        bunArea.getBoundingClientRect().top <= value &&\n        bunArea.getBoundingClientRect().top > 0\n      ) {\n        dispatch({ type: TAB_SWITCH, tab: \"bun\" });\n      }\n      if (\n        mainArea.getBoundingClientRect().top <= value &&\n        mainArea.getBoundingClientRect().top > 0\n      ) {\n        dispatch({ type: TAB_SWITCH, tab: \"main\" });\n      }\n      if (\n        sauceArea.getBoundingClientRect().top <= value &&\n        sauceArea.getBoundingClientRect().top > 0\n      ) {\n        dispatch({ type: TAB_SWITCH, tab: \"sauce\" });\n      }\n    }\n  };\n\n  const handleClick = (e: SyntheticEvent) => {\n    e.preventDefault();\n    const scrollableList = document.getElementById(\"scrollable-list\");\n    const anchorTarget = document.getElementById(`type-${e.currentTarget.id}`);\n    if (scrollableList && anchorTarget) {\n      scrollableList.scrollTo({\n        top: anchorTarget.offsetTop,\n        behavior: \"smooth\",\n      });\n    }\n  };\n\n  const setCurrentTab = (tab: string) => {\n    dispatch({ type: TAB_SWITCH, tab });\n  };\n\n  const content = useMemo<JSX.Element>(() => {\n    return (\n      <ul\n        className={styles.scrollableList}\n        id=\"scrollable-list\"\n        onScroll={handleScroll}\n      >\n        <li className={styles.scrollableListItem}>\n          <IngredientsList\n            data={data.filter((item: IngredientType) => item.type === \"bun\")}\n            anchorId=\"type-bun\"\n            title=\"Булки\"\n          />\n        </li>\n        <li className={styles.scrollableListItem}>\n          <IngredientsList\n            data={data.filter((item: IngredientType) => item.type === \"sauce\")}\n            anchorId=\"type-sauce\"\n            title=\"Соусы\"\n          />\n        </li>\n        <li className={styles.scrollableListItem}>\n          <IngredientsList\n            data={data.filter((item: IngredientType) => item.type === \"main\")}\n            anchorId=\"type-main\"\n            title=\"Начинки\"\n          />\n        </li>\n      </ul>\n    );\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [data]);\n\n  return (\n    <section className={styles.ingredients}>\n      <h1 className={titleClassName}>Соберите бургер</h1>\n      <nav>\n        <ul className={styles.tabs}>\n          <li onClick={handleClick} id=\"bun\">\n            <Tab\n              value=\"bun\"\n              active={currentTab === \"bun\"}\n              onClick={() => setCurrentTab(\"bun\")}\n            >\n              Булки\n            </Tab>\n          </li>\n          <li onClick={handleClick} id=\"sauce\">\n            <Tab\n              value=\"sauce\"\n              active={currentTab === \"sauce\"}\n              onClick={() => setCurrentTab(\"sauce\")}\n            >\n              Соусы\n            </Tab>\n          </li>\n          <li onClick={handleClick} id=\"main\">\n            <Tab\n              value=\"main\"\n              active={currentTab === \"main\"}\n              onClick={() => setCurrentTab(\"main\")}\n            >\n              Начинки\n            </Tab>\n          </li>\n        </ul>\n      </nav>\n      {content}\n    </section>\n  );\n};\n\nexport default BurgerIngredients;\n","import React, { FC } from \"react\";\nimport BurgerConstructor from \"../../components/burger-constructor/burger-constructor\";\nimport BurgerIngredients from \"../../components/burger-ingredients/burger-ingredients\";\nimport styles from \"./main-content.module.css\";\nimport { DndProvider } from \"react-dnd\";\nimport { HTML5Backend } from \"react-dnd-html5-backend\";\n\nconst MainContent: FC = () => {\n  return (\n    <main className={styles.main}>\n      <DndProvider backend={HTML5Backend}>\n        <BurgerIngredients />\n        <BurgerConstructor />\n      </DndProvider>\n    </main>\n  );\n};\n\nexport default MainContent;\n","import React, { FC, SyntheticEvent } from \"react\";\nimport styles from \"./modal-overlay.module.css\";\n\nconst ModalOverlay: FC<{\n  handleCloseByClickOnOverlay: (e: SyntheticEvent) => void;\n}> = (props) => {\n  return (\n    <section\n      className={styles.overlay}\n      onClick={props.handleCloseByClickOnOverlay}\n    >\n      {props.children}\n    </section>\n  );\n};\n\nexport default ModalOverlay;\n","import React, {\n  FC,\n  SyntheticEvent,\n  useCallback,\n  useEffect,\n  useState,\n} from \"react\";\nimport ReactDOM from \"react-dom\";\nimport styles from \"./modal.module.css\";\nimport { CloseIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport classNames from \"classnames\";\nimport ModalOverlay from \"../modal-overlay/modal-overlay\";\nimport { useHistory, useLocation } from \"react-router-dom\";\nimport { IModal, LocationState } from \"../../types/types\";\n\nconst Modal: FC<IModal> = (props) => {\n  const [isHovered, setIsHovered] = useState<boolean>(false);\n  const history = useHistory();\n  const location = useLocation<LocationState>();\n\n  const modalRoot = document.getElementById(\"react-modals\");\n  const titleClassName = classNames(styles.title, \"text text_type_main-large\");\n\n  const changeIconType = () => {\n    setIsHovered(!isHovered);\n  };\n\n  const handleClose = () => {\n    props.handleModalClose();\n    history.replace({\n      pathname:\n        location.state && location.state.background\n          ? `${location.state.background.pathname}`\n          : \"/\",\n    });\n  };\n\n  const handleEscClose = useCallback(\n    (e: KeyboardEvent) => {\n      if (e.key === \"Escape\") {\n        handleClose();\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  useEffect(\n    () => {\n      document.addEventListener(\"keydown\", handleEscClose);\n      return () => {\n        document.removeEventListener(\"keydown\", handleEscClose);\n      };\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    []\n  );\n\n  const handleClickOnOverlay = (e: SyntheticEvent) => {\n    if (e.target !== e.currentTarget) {\n      return;\n    }\n    handleClose();\n  };\n  return modalRoot\n    ? ReactDOM.createPortal(\n        <ModalOverlay handleCloseByClickOnOverlay={handleClickOnOverlay}>\n          <div className={styles.modal}>\n            <div className={styles.modalHeader}>\n              <h2 className={titleClassName}>{props.title}</h2>\n              <div\n                className={styles.closeButton}\n                onMouseOver={changeIconType}\n                onMouseLeave={changeIconType}\n                onClick={handleClose}\n              >\n                {isHovered ? (\n                  <CloseIcon type=\"secondary\" />\n                ) : (\n                  <CloseIcon type=\"primary\" />\n                )}\n              </div>\n            </div>\n            {props.children}\n          </div>\n        </ModalOverlay>,\n        modalRoot\n      )\n    : null;\n};\n\nexport default Modal;\n","import React, { FC } from \"react\";\nimport { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport { NavLink } from \"react-router-dom\";\nimport styles from \"./auth-form.module.css\";\nimport classNames from \"classnames\";\nimport { Redirect, useLocation } from \"react-router\";\nimport { IAuthForm, LinkType, LocationState } from \"../../types/types\";\nimport \"./form.css\";\nimport { useSelectorHook } from \"../../services/store\";\n\nconst AuthForm:FC<IAuthForm> = (props) => {\n  const { children, title, buttonTitle, links, onSubmit } = props;\n  const location = useLocation<LocationState>();\n  const user = useSelectorHook((store) => store.user.user);\n\n  if (user.name) {\n    const { from } = location.state || { from: { pathname: \"/\" } };\n    return <Redirect to={from} />;\n  }\n\n  const titleClassname = classNames(styles.title, \"text text_type_main-medium\");\n  const textClassName = classNames(\"text text_type_main-small\", styles.text);\n\n  const linkClassName = classNames(\"text text_type_main-small\", styles.link);\n\n  return (\n    <form className={styles.form} onSubmit={onSubmit}>\n      <h2 className={titleClassname}>{title}</h2>\n      {children}\n      <Button type=\"primary\" size=\"medium\">\n        {buttonTitle}\n      </Button>\n      <ul className={styles.list}>\n        {links.map((link: LinkType, index: number) => {\n          return (\n            <li className={styles.listItem} key={index}>\n              <p className={textClassName}>{link.text}</p>\n              <NavLink to={link.path} className={linkClassName}>\n                {link.linkText}\n              </NavLink>\n            </li>\n          );\n        })}\n      </ul>\n    </form>\n  );\n};\n\nexport default AuthForm;\n","import React, { FC, SyntheticEvent } from \"react\";\nimport { loginLinks, loginTitles } from \"../../utils/constants\";\nimport AuthForm from \"../../components/auth-form/auth-form\";\nimport {\n  Input,\n  PasswordInput,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {\n  loginFormSubmit,\n  setLoginFormValue,\n} from \"../../services/actions/user\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { Redirect, useLocation } from \"react-router-dom\";\nimport { LocationState } from \"../../types/types\";\n\nconst Login: FC = () => {\n  const { email, password } = useSelectorHook((store) => ({\n    ...store.user.loginForm,\n  }));\n  const user = useSelectorHook((store) => store.user.user.name);\n  const location = useLocation<LocationState>();\n\n  const dispatch = useAppDispatch();\n\n  const { formTitle, buttonTitle } = loginTitles;\n\n  if (user) {\n    const { from } = location.state ? location.state : { from: { pathname: \"/\" } };\n    return <Redirect to={from.pathname} />;\n  }\n\n  const onChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    const { name, value } = e.target as HTMLInputElement;\n    dispatch(setLoginFormValue(name, value));\n  };\n\n  const onSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(loginFormSubmit());\n  };\n  return (\n    <AuthForm\n      title={formTitle}\n      buttonTitle={buttonTitle}\n      links={loginLinks}\n      onSubmit={onSubmit}\n    >\n      <Input\n        type=\"email\"\n        onChange={onChange}\n        value={email}\n        name={\"email\"}\n        placeholder=\"E-mail\"\n      />\n      <PasswordInput\n        value={password}\n        name={\"password\"}\n        onChange={onChange}\n        size=\"default\"\n      />\n    </AuthForm>\n  );\n};\n\nexport default Login;\n","import React, { FC, SyntheticEvent } from \"react\";\nimport { registerLinks, registerTitles } from \"../../utils/constants\";\nimport AuthForm from \"../../components/auth-form/auth-form\";\nimport {\n  PasswordInput,\n  Input,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {\n  registerFormSubmit,\n  setRegisterFormValue,\n} from \"../../services/actions/user\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { Redirect, useLocation } from \"react-router-dom\";\nimport { LocationState } from \"../../types/types\";\n\nconst Register:FC = () => {\n  const { email, password, name } = useSelectorHook((store) => ({\n    ...store.user.registerForm,\n  }));\n  const user  = useSelectorHook((store) => store.user.user.name);\n  const dispatch = useAppDispatch();\n  const { formTitle, buttonTitle } = registerTitles;\n  const location = useLocation<LocationState>();\n\n\n  const onChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    const { name, value } = e.target as HTMLInputElement;\n    dispatch(setRegisterFormValue(name, value));\n  };\n\n  const onSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(registerFormSubmit());\n  };\n\n  if (user) {\n    const { from } = location.state ? location.state : { from: { pathname: \"/\" } };\n    return <Redirect to={from} />;\n  }\n\n  return (\n    <AuthForm\n      title={formTitle}\n      buttonTitle={buttonTitle}\n      links={registerLinks}\n      onSubmit={onSubmit}\n    >\n      <Input\n        type=\"text\"\n        onChange={onChange}\n        value={name}\n        name={\"name\"}\n        placeholder={\"Имя\"}\n      />\n      <Input\n        type=\"email\"\n        onChange={onChange}\n        value={email}\n        name={\"email\"}\n        placeholder=\"E-mail\"\n      />\n      <PasswordInput\n        value={password}\n        name={\"password\"}\n        onChange={onChange}\n        size=\"default\"\n      />\n    </AuthForm>\n  );\n};\n\nexport default Register;\n","import React, { FC, SyntheticEvent, useEffect } from \"react\";\nimport {\n  forgotPasswordLinks,\n  forgotPasswordTitles,\n} from \"../../utils/constants\";\nimport AuthForm from \"../../components/auth-form/auth-form\";\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {\n  forgotPasswordFormSubmit,\n  setForgotPasswordFormValue,\n} from \"../../services/actions/user\";\nimport { Redirect, useHistory, useLocation } from \"react-router-dom\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { LocationState } from \"../../types/types\";\n\nconst ForgotPassword:FC = () => {\n  const history = useHistory();\n  const { email } = useSelectorHook((store) => ({\n    ...store.user.forgotPasswordForm,\n  }));\n  const user  = useSelectorHook((store) => store.user.user.name);\n  const emailSent = useSelectorHook((store) => store.user.emailSent);\n  const dispatch = useAppDispatch();\n  const location = useLocation<LocationState>();\n\n  const { formTitle, buttonTitle } = forgotPasswordTitles;\n  \n  const onChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    const {name, value} = e.target as HTMLInputElement;\n    dispatch(setForgotPasswordFormValue(name, value));\n  };\n\n  useEffect(() => {\n    if (emailSent) {\n      history.replace({ pathname: \"/reset-password\" });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [emailSent]);\n\n  const onSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(forgotPasswordFormSubmit());\n  };\n\n  if (user) {\n    const { from } = location.state ? location.state : { from: { pathname: \"/\" } };\n    return <Redirect to={from} />;\n  }\n  \n  return (\n    <AuthForm\n      title={formTitle}\n      buttonTitle={buttonTitle}\n      links={forgotPasswordLinks}\n      onSubmit={onSubmit}\n    >\n      <Input\n        type=\"email\"\n        value={email}\n        name={\"email\"}\n        onChange={onChange}\n        size=\"default\"\n        placeholder=\"Укажите e-mail\"\n      />\n    </AuthForm>\n  );\n};\n\nexport default ForgotPassword;\n","import React, { FC, SyntheticEvent } from \"react\";\nimport { profileMenuLinks } from \"../../utils/constants\";\nimport { NavLink, useRouteMatch } from \"react-router-dom\";\nimport styles from \"./profile-menu.module.css\";\nimport { logout } from \"../../services/actions/user\";\nimport classNames from \"classnames\";\nimport { chooseMenuCaption } from \"../../utils/utils\";\nimport { useAppDispatch } from \"../../services/store\";\n\nconst ProfileMenu:FC = () => {\n  const dispatch = useAppDispatch();\n  const { path } = useRouteMatch();\n  const linkClassName = classNames(styles.link, \"text text_type_main-medium\");\n  const textClassName = classNames(\n    styles.text,\n    \"text text_type_main-default text_color_inactive\"\n  );\n\n  const onClick = (e: SyntheticEvent<HTMLAnchorElement>) => {\n    const { id } = e.target as HTMLAnchorElement;\n    if (id === \"logout\") {\n      dispatch(logout());\n    }\n  };\n  return (\n    <nav>\n      <ul className={styles.linkList}>\n        {profileMenuLinks.map((link, index) => {\n          return (\n            <li className={styles.linkListItem} key={index}>\n              <NavLink\n                id={link.id}\n                to={link.link}\n                onClick={onClick}\n                className={linkClassName}\n                activeClassName={`${path === link.link && styles.activeLink}`}\n              >\n                {link.text}\n              </NavLink>\n            </li>\n          );\n        })}\n      </ul>\n      <p className={textClassName}>{chooseMenuCaption(path)}</p>\n    </nav>\n  );\n};\n\nexport default ProfileMenu;\n","import React, { FC, useEffect } from \"react\";\nimport styles from \"./profile.module.css\";\nimport ProfileMenu from \"../../components/profile-menu/profile-menu\";\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_START } from \"../../services/actions/ws\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\n\nconst Profile:FC = (props) => {\n  const dispatch = useAppDispatch();\n  const user  = useSelectorHook((store) => store.user.user.name);\n\n  useEffect(() => {\n    if (user) {\n      dispatch({ type: WS_CONNECTION_START, payload: \"withAuth\" });\n    }\n    return(() => {\n      dispatch({type: WS_CONNECTION_CLOSED});\n    })\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dispatch]);\n\n  return (\n    <section className={styles.profile}>\n      <ProfileMenu />\n      {props.children}\n    </section>\n  );\n};\n\nexport default Profile;\n","import React, { FC, SyntheticEvent, useEffect, useState } from \"react\";\nimport {\n  forgotPasswordLinks,\n  resetPasswordTitles,\n} from \"../../utils/constants\";\nimport AuthForm from \"../../components/auth-form/auth-form\";\nimport { Input } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {\n  resetPasswordFormSubmit,\n  setResetPasswordFormValue,\n} from \"../../services/actions/user\";\nimport { Redirect, useHistory, useLocation } from \"react-router\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { LocationState } from \"../../types/types\";\n\nconst ResetPassword:FC = () => {\n  const [isPasswordShown, setIsPasswordShown] = useState<boolean>(false);\n  const history = useHistory();\n  const resetSuccess = useSelectorHook((store) => store.user.resetSuccess);\n  const { token, newPassword } = useSelectorHook((store) => ({\n    ...store.user.resetPasswordForm,\n  }));\n  const user  = useSelectorHook((store) => store.user.user.name);\n  const dispatch = useAppDispatch();\n  const { formTitle, buttonTitle } = resetPasswordTitles;\n  const location = useLocation<LocationState>();\n\n  useEffect(() => {\n    if (resetSuccess) {\n      history.replace({ pathname: \"/login\" });\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [resetSuccess]);\n  \n  if (user) {\n    const { from } = location.state ? location.state : { from: { pathname: \"/\" } };\n    return <Redirect to={from} />;\n  }\n\n  if (!localStorage.getItem(\"emailSent\")) {\n    return <Redirect to={{ pathname: \"/forgot-password\" }} />;\n  }\n\n  const onChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    const { name, value } = e.target as HTMLInputElement;\n    dispatch(setResetPasswordFormValue(name, value));\n  };\n\n  const onIconClick = () => {\n    setIsPasswordShown(!isPasswordShown);\n  };\n\n  const onSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(resetPasswordFormSubmit());\n  };\n\n  return (\n    <AuthForm\n      title={formTitle}\n      buttonTitle={buttonTitle}\n      links={forgotPasswordLinks}\n      onSubmit={onSubmit}\n    >\n      <Input\n        type={isPasswordShown ? \"text\" : \"password\"}\n        value={newPassword}\n        name=\"newPassword\"\n        onChange={onChange}\n        size=\"default\"\n        icon={isPasswordShown ? \"HideIcon\" : \"ShowIcon\"}\n        placeholder=\"Введите новый пароль\"\n        onIconClick={onIconClick}\n      />\n      <Input\n        type=\"text\"\n        value={token}\n        name=\"token\"\n        onChange={onChange}\n        size=\"default\"\n        placeholder=\"Введите код из письма\"\n      />\n    </AuthForm>\n  );\n};\n\nexport default ResetPassword;\n","import classNames from \"classnames\";\nimport React, { FC } from \"react\";\nimport { ingredientDetailsTitle } from \"../../utils/constants\";\nimport IngredientDetails from \"../../components/ingredient-details/ingredient-details\";\nimport styles from \"./ingredient-item-page.module.css\";\n\nconst IngredientItemPage:FC = () => {\n  const titleClassName = classNames(styles.title, \"text text_type_main-large\");\n\n  return (\n    <section className={styles.page}>\n      <h1 className={titleClassName}>{ingredientDetailsTitle}</h1>\n      <IngredientDetails />\n    </section>\n  );\n};\n\nexport default IngredientItemPage;\n","import React, { FC, useEffect, useState } from \"react\";\nimport { Redirect, Route, RouteProps } from \"react-router\";\nimport { getUserInfo } from \"../../services/actions/user\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\n\nconst ProtectedRoute:FC<RouteProps> = ({ children, ...rest }) => {\n  const dispatch = useAppDispatch();\n  const user = useSelectorHook((store) => store.user.user.name);\n  const [isUserLoaded, setIsUserLoaded] = useState(false);\n\n  useEffect(() => {\n    dispatch(getUserInfo());\n    setIsUserLoaded(true);\n  }, [dispatch]);\n\n  if (!isUserLoaded) {\n    return null;\n  }\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        user ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: \"/login\",\n              state: { from: location },\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import React, { FC, RefObject, SyntheticEvent, useRef, useState } from \"react\";\nimport {\n  Button,\n  Input,\n} from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport {\n  getUserInfo,\n  setProfileFormValue,\n  updateUserInfo,\n} from \"../../services/actions/user\";\nimport styles from \"./profile-form.module.css\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\n\nconst ProfileForm:FC = () => {\n  const { email, password, name } = useSelectorHook((store) => ({\n    ...store.user.profileForm,\n  }));\n\n  const initialIconState = {\n    name: false,\n    email: false,\n    password: false,\n  };\n  const [isInputInFocus, setIsInputInFocus] =\n    useState<{ name: boolean; email: boolean; password: boolean }>(\n      initialIconState\n    );\n  const dispatch = useAppDispatch();\n  const nameRef = useRef<HTMLInputElement>(null);\n  const emailRef = useRef<HTMLInputElement>(null);\n  const passwordRef = useRef<HTMLInputElement>(null);\n\n  const onChange = (e: SyntheticEvent<HTMLInputElement>) => {\n    const { name, value } = e.target as HTMLInputElement;\n    dispatch(setProfileFormValue(name, value));\n  };\n\n  const clearField = (name: string) => {\n    dispatch(setProfileFormValue(name, \"\"));\n  };\n\n  const onIconClick = (ref: RefObject<HTMLInputElement>) => {\n    if (ref && ref.current) {\n      setIsInputInFocus({\n        ...initialIconState,\n        [ref.current.name]: true,\n      });\n      setTimeout(() => {\n        ref.current?.focus();\n      }, 0);\n    }\n  };\n\n  const resetChanges = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(getUserInfo());\n  };\n\n  const onSubmit = (e: SyntheticEvent) => {\n    e.preventDefault();\n    dispatch(updateUserInfo());\n  };\n\n  return (\n    <form onSubmit={onSubmit}>\n      <ul className={styles.inputList}>\n        <li className={styles.inputListItem}>\n          <Input\n            type=\"text\"\n            name={\"name\"}\n            value={name}\n            onChange={onChange}\n            placeholder=\"Имя\"\n            ref={nameRef}\n            icon={isInputInFocus.name ? \"CloseIcon\" : \"EditIcon\"}\n            onIconClick={() =>\n              isInputInFocus.name ? clearField(\"name\") : onIconClick(nameRef)\n            }\n          />\n        </li>\n        <li className={styles.inputListItem}>\n          <Input\n            type=\"email\"\n            name={\"email\"}\n            value={email}\n            onChange={onChange}\n            placeholder=\"Логин\"\n            ref={emailRef}\n            icon={isInputInFocus.email ? \"CloseIcon\" : \"EditIcon\"}\n            onIconClick={() =>\n              isInputInFocus.email ? clearField(\"email\") : onIconClick(emailRef)\n            }\n          />\n        </li>\n        <li className={styles.inputListItem}>\n          <Input\n            type=\"password\"\n            name={\"password\"}\n            value={password}\n            onChange={onChange}\n            placeholder=\"Пароль\"\n            ref={passwordRef}\n            icon={isInputInFocus.password ? \"CloseIcon\" : \"EditIcon\"}\n            onIconClick={() =>\n              isInputInFocus.password\n                ? clearField(\"password\")\n                : onIconClick(passwordRef)\n            }\n          />\n        </li>\n      </ul>\n      <div className={styles.buttons}>\n        <Button type=\"secondary\" onClick={resetChanges}>\n          Отменить\n        </Button>\n        <Button type=\"primary\">Сохранить</Button>\n      </div>\n    </form>\n  );\n};\n\nexport default ProfileForm;\n","import { Button } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport classNames from \"classnames\";\nimport React, { FC } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport styles from \"./not-found-page.module.css\";\n\nconst NotFoundPage:FC = () => {\n  const history = useHistory();\n\n  const titleClassName = classNames(styles.title, \"text text_type_main-large\");\n\n  const textClassName = classNames(styles.text, \"text text_type_main-medium\");\n\n  const handleGoBack = () => {\n    history.goBack();\n  };\n  return (\n    <section className={styles.page}>\n      <h1 className={titleClassName}>404</h1>\n      <p className={textClassName}>Страница не найдена</p>\n      <Button type=\"secondary\" onClick={handleGoBack}>\n        Назад\n      </Button>\n    </section>\n  );\n};\n\nexport default NotFoundPage;\n","import classNames from \"classnames\";\nimport React from \"react\";\nimport { useSelectorHook } from \"../../services/store\";\nimport { OrderType } from \"../../types/types\";\nimport { maxAmountOrdersToShow } from \"../../utils/constants\";\nimport style from \"./order-feed-info.module.css\";\n\nconst OrderFeedInfo = () => {\n  const { totalOrdersCount, todayOrdersCount, orders } = useSelectorHook(\n    (store) => store.ws\n  );\n  const textClassName = classNames(style.text, \"text text_type_main-medium\");\n  const orderIdClassName = classNames(\n    style.orderId,\n    \"text text_type_digits-default\"\n  );\n  const doneOrders = orders\n    .filter((order: OrderType) => order.status === \"done\")\n    .reverse()\n    .slice(orders.length - maxAmountOrdersToShow, orders.length);\n  const inProgressOrders = orders\n    .filter((order: OrderType) => order.status !== \"done\")\n    .reverse()\n    .slice(orders.length - maxAmountOrdersToShow, orders.length);\n  const countClassName = classNames(style.count, \"text text_type_digits-large\");\n\n  return (\n    <div className={style.info}>\n      <div className={style.orderNums}>\n        <p className={textClassName}>Готовы:</p>\n        <ul className={style.list}>\n          {doneOrders &&\n            doneOrders.length &&\n            doneOrders.map((order: OrderType) => {\n              return (\n                <p className={orderIdClassName} key={order._id}>\n                  {order.number}\n                </p>\n              );\n            })}\n        </ul>\n      </div>\n      <div className={style.orderNums}>\n        <p className={textClassName}>В работе:</p>\n        <ul className={style.list}>\n          {inProgressOrders &&\n            inProgressOrders.length &&\n            inProgressOrders.map((order: OrderType) => {\n              return (\n                <p className={orderIdClassName} key={order._id}>\n                  {order.number}\n                </p>\n              );\n            })}\n        </ul>\n      </div>\n      <p className={textClassName}>Выполнено за все время:</p>\n      <p className={countClassName}>{totalOrdersCount}</p>\n      <p className={textClassName}>Выполнено за сегодня:</p>\n      <p className={countClassName}>{todayOrdersCount}</p>\n    </div>\n  );\n};\n\nexport default OrderFeedInfo;\n","import React, { FC, useEffect, useState } from \"react\";\nimport classNames from \"classnames\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport style from \"./order-item.module.css\";\nimport { Link, useLocation, useRouteMatch } from \"react-router-dom\";\nimport { OPEN_MADE_ORDER_MODAL } from \"../../services/actions/order\";\nimport { maxAmountOfIngredients } from \"../../utils/constants\";\nimport defaultPic from \"../../images/ingredient.png\";\nimport { IngredientType, IOrder, LocationState } from \"../../types/types\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { formatDate } from \"../../utils/utils\";\n\nconst OrderItem: FC<IOrder> = ({ order, wide }) => {\n  const [isLeft, setIsLeft] = useState<boolean>(false);\n  const [leftCount, setLeftCount] = useState<number>(0);\n  const dispatch = useAppDispatch();\n  const location = useLocation<LocationState>();\n  const { url } = useRouteMatch();\n  const allIngredients = useSelectorHook(\n    (store) => store.ingredients.ingredients\n  );\n\n  const { number, createdAt, name, ingredients, status } = order;\n  let price = 0;\n\n  const orderIngredients = ingredients.map((id: string) => {\n    return allIngredients.find((item: IngredientType) => {\n      if (item._id === id) {\n        price += item.price;\n      }\n      return item._id === id;\n    });\n  });\n\n  const orderClassName = classNames(\n    style.order,\n    \"mb-4\",\n    wide && style.orderWide\n  );\n  const orderIdClassName = classNames(\n    style.orderId,\n    \"text text_type_digits-default\"\n  );\n  const dateClassName = classNames(style.date, \"text text_type_main-small\");\n  const titleClassName = classNames(style.title, \"text text_type_main-medium\");\n  const priceClassName = classNames(\n    style.price,\n    \"text text_type_digits-default\"\n  );\n  const leftNumClassName = classNames(\n    style.leftNum,\n    \"text text_type_digits-small\"\n  );\n  const statusClassName = classNames({\n    [style.status]: true,\n    [style.statusReady]: status === \"done\",\n    \"text text_type_main-small\": true,\n  });\n\n  useEffect(() => {\n    if (orderIngredients.length > maxAmountOfIngredients) {\n      setLeftCount(orderIngredients.length - maxAmountOfIngredients);\n      setIsLeft(true);\n    } else {\n      setLeftCount(0);\n      setIsLeft(false);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  const handleOrderClick = () => {\n    dispatch({ type: OPEN_MADE_ORDER_MODAL });\n  };\n\n  return (\n    <li>\n      <Link\n        to={{pathname: `${url}/${number}`, state:{background: location}}}\n        className={orderClassName}\n        onClick={handleOrderClick}\n      >\n        <p className={orderIdClassName}>#{number}</p>\n        <p className={dateClassName}>{formatDate(createdAt)}</p>\n        <div className={style.titleContainer}>\n          <h3 className={titleClassName}>{name}</h3>\n          {wide && (\n            <p className={statusClassName}>\n              {status === \"done\" ? \"Выполнен\" : \"Создан\"}\n            </p>\n          )}\n        </div>\n        <ul className={style.ingredients}>\n          {orderIngredients &&\n            orderIngredients.length &&\n            orderIngredients\n              .reverse()\n              .slice(0, maxAmountOfIngredients)\n              .map((ingredient: IngredientType | undefined, index: number) => {\n                return (\n                  <li className={style.ingredient} key={index}>\n                    <img\n                      className={style.ingredientImage}\n                      src={\n                        ingredient && ingredient.image\n                          ? ingredient.image\n                          : defaultPic\n                      }\n                      alt={ingredient && ingredient.name ? ingredient.name : \"\"}\n                    />\n                    {isLeft && (\n                      <div className={style.left}>\n                        <p className={leftNumClassName}>+{leftCount}</p>\n                      </div>\n                    )}\n                  </li>\n                );\n              })}\n        </ul>\n        <p className={priceClassName}>\n          {price} <CurrencyIcon type=\"primary\" />\n        </p>\n      </Link>\n    </li>\n  );\n};\n\nexport default OrderItem;\n","export default \"data:image/png;base64,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\"","import classNames from \"classnames\";\nimport React, { FC } from \"react\";\nimport { useSelectorHook } from \"../../services/store\";\nimport { OrderType } from \"../../types/types\";\nimport OrderItem from \"../order-item/order-item\";\nimport style from \"./order-list.module.css\";\n\nconst OrderList: FC<{ wide: boolean }> = ({ wide }) => {\n  const { orders } = useSelectorHook((store) => store.ws);\n\n  const listClassName = classNames(style.list, wide && style.listWide);\n\n  const compareOrders = (a: OrderType, b: OrderType) => {\n    if (a.createdAt < b.createdAt) {\n      return 1;\n    }\n    if(a.createdAt === b.createdAt) {\n      return 0;\n    }\n    return -1;\n  };\n\n  return (\n    <ul className={listClassName}>\n      {orders &&\n        orders.length &&\n        orders.sort(compareOrders).map((order: OrderType) => {\n          return <OrderItem order={order} wide={wide} key={order._id} />;\n        })}\n    </ul>\n  );\n};\n\nexport default OrderList;\n","import React, { FC, useEffect } from \"react\";\nimport classNames from \"classnames\";\nimport OrderFeedInfo from \"../../components/order-feed-info/order-feed-info\";\nimport OrderList from \"../../components/order-list/order-list\";\nimport style from \"./feed.module.css\";\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_START } from \"../../services/actions/ws\";\nimport { useAppDispatch } from \"../../services/store\";\n\nconst Feed: FC = () => {\n  const dispatch = useAppDispatch();\n\n  const titleClassName = classNames(\n    style.title,\n    \"text text_type_main-large\",\n    \"mb-5\"\n  );\n\n  useEffect(() => {\n    dispatch({ type: WS_CONNECTION_START, payload: \"withoutAuth\" });\n    return(() => {\n      dispatch({type: WS_CONNECTION_CLOSED});\n    })\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dispatch]);\n\n  return (\n    <section className={style.feed}>\n      <h1 className={titleClassName}>Лента заказов</h1>\n      <div className={style.content}>\n        <OrderList wide={false} />\n        <OrderFeedInfo />\n      </div>\n    </section>\n  );\n};\n\nexport default Feed;\n","import classNames from \"classnames\";\nimport React, { FC, useEffect, useState } from \"react\";\nimport { useParams, useRouteMatch } from \"react-router\";\nimport { CurrencyIcon } from \"@ya.praktikum/react-developer-burger-ui-components\";\nimport style from \"./order.module.css\";\nimport { IngredientType, OrderType } from \"../../types/types\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { WS_CONNECTION_CLOSED, WS_CONNECTION_START } from \"../../services/actions/ws\";\nimport { formatDate } from \"../../utils/utils\";\n\nconst Order:FC<{ isModal: boolean }> = ({ isModal }) => {\n  const { id } = useParams<{ id?: string }>();\n  const {url} = useRouteMatch();\n  const dispatch = useAppDispatch();\n  const orders = useSelectorHook((store) => store.ws.orders);\n  const [totalPrice, setTotalPrice] = useState<number>(0);\n  const order = orders.find((order: OrderType) => order.number && order.number === Number(id));\n  const [ingredientsToShow, setIngredientsToShow] = useState<Array<IngredientType>>([]);\n  const allIngredients = useSelectorHook((store) => store.ingredients.ingredients);\n\n  useEffect(() => {\n    if(!orders.length){\n      if(url.match('feed')) {\n        dispatch({type: WS_CONNECTION_START, payload: 'withoutAuth'})\n      } else {\n        dispatch({type: WS_CONNECTION_START, payload: 'withAuth'})\n      }\n    }\n    return(() => {\n      if(orders){\n        dispatch({type: WS_CONNECTION_CLOSED});\n      }\n    })\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (order && allIngredients && order.ingredients) {\n      let price = 0;\n      const ingredientsList = order.ingredients.map((id: string) => {\n        const ingredient = allIngredients.find(\n          (ingredient: IngredientType) => {\n            if (ingredient._id === id) {\n              price += ingredient.price;\n            }\n            return ingredient._id === id;\n          }\n        );\n        return { ...ingredient, qty: 1 };\n      });\n      setIngredientsToShow(\n        (ingredientsList as (IngredientType[]))\n          .reduce((prev: Array<IngredientType>, item: IngredientType) => {\n            const index = prev.findIndex(\n              (ingredient: IngredientType) => ingredient._id === item._id\n            );\n            if (index < 0) {\n              return [...prev, item];\n            } else {\n              prev[index].qty += 1;\n              return prev;\n            }\n          }, [])\n          .reverse()\n      );\n      setTotalPrice(price);\n    }\n  }, [allIngredients, order]);\n\n  const orderIdClassName = classNames({\n    [style.orderId]: true,\n    [style.orderIdModal]: isModal,\n    \"text text_type_digits-default\": true,\n  });\n  const dateClassName = classNames(style.date, \"text text_type_main-small\");\n  const textClassName = classNames(style.title, \"text text_type_main-medium\");\n  const ingredientNameClassName = classNames(\n    style.name,\n    \"text text_type_main-small\"\n  );\n  const priceClassName = classNames(\n    style.price,\n    \"text text_type_digits-default\"\n  );\n  const statusClassName = classNames({\n    [style.status]: true,\n    [style.statusReady]: true,\n    \"text text_type_main-small\": true,\n  });\n\n  return (\n    <section className={style.order}>\n      <p className={orderIdClassName}>#{order && order.number ? order.number : 0}</p>\n      <h3 className={textClassName}>{order && order.name ? order.name : ''}</h3>\n      <p className={statusClassName}>\n        {order && order.status === \"done\" ? \"Выполнен\" : \"Создан\"}\n      </p>\n      <p className={textClassName}>Состав:</p>\n      <ul className={style.ingredients}>\n        {ingredientsToShow &&\n          ingredientsToShow.length &&\n          ingredientsToShow.map((item: IngredientType) => {\n            return (\n              <li className={style.ingredient} key={item._id}>\n                <img\n                  className={style.image}\n                  alt={item && item.name ? item.name : \"\"}\n                  src={item && item.image ? item.image : \"\"}\n                />\n                <p className={ingredientNameClassName}>\n                  {item && item.name ? item.name : \"\"}\n                </p>\n                <p className={priceClassName}>\n                  {item.qty > 1 ? `${item.qty} x ` : \"\"}\n                  {item.price} <CurrencyIcon type=\"primary\" />\n                </p>\n              </li>\n            );\n          })}\n      </ul>\n      <div className={style.total}>\n        <p className={dateClassName}>{order && order.createdAt ? formatDate(order.createdAt) : ''}</p>\n        <p className={priceClassName}>\n          {totalPrice} <CurrencyIcon type=\"primary\" />\n        </p>\n      </div>\n    </section>\n  );\n};\n\nexport default Order;\n","import React, { useEffect } from \"react\";\nimport AppHeader from \"../app-header/app-header\";\nimport styles from \"./app.module.css\";\nimport { ingredientDetailsTitle } from \"../../utils/constants\";\nimport IngredientDetails from \"../ingredient-details/ingredient-details\";\nimport OrderDetails from \"../order-details/order-details\";\nimport {\n  CLOSE_INGREDIENT_MODAL,\n  getAllIngredients,\n} from \"../../services/actions/ingredients\";\nimport {\n  CLOSE_MADE_ORDER_MODAL,\n  CLOSE_ORDER_MODAL,\n} from \"../../services/actions/order\";\nimport MainContent from \"../../pages/main-content/main-content\";\nimport Modal from \"../modal/modal\";\nimport { Route, Switch, useHistory, useLocation } from \"react-router-dom\";\nimport Login from \"../../pages/login/login\";\nimport Register from \"../../pages/register/register\";\nimport ForgotPassword from \"../../pages/forgot-password/forgot-password\";\nimport Profile from \"../../pages/profile/profile\";\nimport ResetPassword from \"../../pages/reset-password/reset-password\";\nimport { CLOSE_UPDATE_INFO_MODAL, getUserInfo } from \"../../services/actions/user\";\nimport IngredientItemPage from \"../../pages/ingredient-item-page/ingredient-item-page\";\nimport ProtectedRoute from \"../protected-route/protected-route\";\nimport ProfileForm from \"../profile-form/profile-form\";\nimport NotFoundPage from \"../../pages/not-found-page/not-found-page\";\nimport Feed from \"../../pages/feed/feed\";\nimport OrderList from \"../order-list/order-list\";\nimport Order from \"../../pages/order/order\";\nimport { useAppDispatch, useSelectorHook } from \"../../services/store\";\nimport { LocationState } from \"../../types/types\";\n\nfunction App() {\n  const history = useHistory();\n  const { isOrderModalOpen, isMadeOrderModalOpen } = useSelectorHook(\n    (store) => store.order\n  );\n  const { isIngredientModalOpen } = useSelectorHook(\n    (store) => store.ingredients\n  );\n  const isAppLoading = useSelectorHook(\n    (store) => store.ingredients.ingredientsRequest\n  );\n  const updateSuccess = useSelectorHook((store) => store.user.updateSuccess);\n  const location = useLocation<LocationState>();\n  let background: typeof location | undefined;\n  if (history.action !== \"POP\" && location.state) {\n    background = location.state.background;\n  }\n\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(getAllIngredients());\n  }, [dispatch]);\n\n  useEffect(() => {\n    dispatch(getUserInfo());\n  }, [dispatch]);\n\n  //закрытие всех модальных окон\n  const handleModalsClose = () => {\n    dispatch({ type: CLOSE_ORDER_MODAL });\n    dispatch({ type: CLOSE_INGREDIENT_MODAL });\n    dispatch({ type: CLOSE_UPDATE_INFO_MODAL });\n    dispatch({ type: CLOSE_MADE_ORDER_MODAL });\n  };\n\n  return (\n    <div className={styles.App}>\n      <AppHeader />\n      <Switch location={background || location}>\n        <Route exact path=\"/\">\n          {/* временная замена лоудеру */}\n          {isAppLoading && <p>Loading...</p>}\n          {!isAppLoading && <MainContent />}\n        </Route>\n        <ProtectedRoute exact path=\"/profile\">\n          <Profile>\n            <ProfileForm />\n          </Profile>\n        </ProtectedRoute>\n        <ProtectedRoute exact path=\"/profile/orders\">\n          <Profile>\n            <OrderList wide />\n          </Profile>\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/profile/orders/:id\">\n          <Order isModal={false} />\n        </ProtectedRoute>\n        <Route exact path=\"/login\">\n          <Login />\n        </Route>\n        <Route exact path=\"/register\">\n          <Register />\n        </Route>\n        <Route exact path=\"/forgot-password\">\n          <ForgotPassword />\n        </Route>\n        <Route exact path=\"/reset-password\">\n          <ResetPassword />\n        </Route>\n        <Route path=\"/ingredients/:id\">\n          <IngredientItemPage />\n        </Route>\n        <Route exact path=\"/feed\">\n          <Feed />\n        </Route>\n        <Route path=\"/feed/:id\">\n          <Order isModal={false} />\n        </Route>\n        <Route path=\"*\">\n          <NotFoundPage />\n        </Route>\n      </Switch>\n      {background && isIngredientModalOpen && (\n        <Route path=\"/ingredients/:id\">\n          <Modal\n            title={ingredientDetailsTitle}\n            handleModalClose={handleModalsClose}\n          >\n            <IngredientDetails />\n          </Modal>\n        </Route>\n      )}\n      {background && isMadeOrderModalOpen && (\n        <Route path=\"/feed/:id\">\n          <Modal title=\"\" handleModalClose={handleModalsClose}>\n            <Order isModal={true} />\n          </Modal>\n        </Route>\n      )}\n      {background && isMadeOrderModalOpen && (\n        <ProtectedRoute path=\"/profile/orders/:id\">\n          <Modal title=\"\" handleModalClose={handleModalsClose}>\n            <Order isModal={true} />\n          </Modal>\n        </ProtectedRoute>\n      )}\n      {isOrderModalOpen && (\n        <Modal title=\"\" handleModalClose={handleModalsClose}>\n          <OrderDetails />\n        </Modal>\n      )}\n      {updateSuccess && (\n        <Modal title=\"Уведомление\" handleModalClose={handleModalsClose}>\n          <p className=\"text text_type_main-medium\">Данные успешно обновлены</p>\n        </Modal>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { BrowserRouter } from \"react-router-dom\";\nimport \"./index.css\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Provider } from \"react-redux\";\nimport App from \"./components/app/App\";\nimport store from './services/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"details\":\"ingredient-details_details__uP6-A\",\"image\":\"ingredient-details_image__H2-xP\",\"name\":\"ingredient-details_name__3OKTo\",\"nutritionalValue\":\"ingredient-details_nutritionalValue__39b2X\",\"text\":\"ingredient-details_text__1jgQH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"info\":\"order-feed-info_info__6oMuG\",\"orderNums\":\"order-feed-info_orderNums__3IGGn\",\"text\":\"order-feed-info_text__3GzNI\",\"list\":\"order-feed-info_list__1cN0d\",\"orderId\":\"order-feed-info_orderId__2HcNN\",\"count\":\"order-feed-info_count__sslDJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"burger-ingredients_ingredients__2TY9H\",\"title\":\"burger-ingredients_title__32v1n\",\"tabs\":\"burger-ingredients_tabs__1yNyE\",\"scrollableList\":\"burger-ingredients_scrollableList__ndQQa\",\"scrollableListItem\":\"burger-ingredients_scrollableListItem__5PjaE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form\":\"auth-form_form__1d4QB\",\"title\":\"auth-form_title__3QMLn\",\"list\":\"auth-form_list__2tAW_\",\"listItem\":\"auth-form_listItem__3HETV\",\"text\":\"auth-form_text__3DpyY\",\"link\":\"auth-form_link__a660i\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-details_order__12ZdD\",\"id\":\"order-details_id__1POxV\",\"title\":\"order-details_title__FoYOr\",\"image\":\"order-details_image__lnOoe\",\"info\":\"order-details_info__1dZwp\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"burgerConstructor\":\"burger-constructor_burgerConstructor__1Ei5R\",\"hoveredContainer\":\"burger-constructor_hoveredContainer__1BRev\",\"list\":\"burger-constructor_list__2lXaw\",\"makeOrderInfo\":\"burger-constructor_makeOrderInfo__3xu6z\",\"price\":\"burger-constructor_price__Q5cGy\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"card\":\"ingredient-item_card__2tuyr\",\"dragCard\":\"ingredient-item_dragCard__2xQt_\",\"price\":\"ingredient-item_price__3YWz3\",\"digit\":\"ingredient-item_digit__21FZc\",\"text\":\"ingredient-item_text__7UJ12\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"linkList\":\"profile-menu_linkList__3oY89\",\"linkListItem\":\"profile-menu_linkListItem__26GyW\",\"link\":\"profile-menu_link__1GXQJ\",\"activeLink\":\"profile-menu_activeLink__1Ahyy\",\"text\":\"profile-menu_text__lo4lQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"inputList\":\"profile-form_inputList__9Mtgl\",\"inputListItem\":\"profile-form_inputListItem__10rvU\",\"buttons\":\"profile-form_buttons__13iek\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1DF1f\",\"modalHeader\":\"modal_modalHeader__Ukaot\",\"title\":\"modal_title__1efUU\",\"closeButton\":\"modal_closeButton__2SoUT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients\":\"ingredients-list_ingredients__2NfY-\",\"title\":\"ingredients-list_title__1XkLE\",\"list\":\"ingredients-list_list__2ysSO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"not-found-page_page__24p2A\",\"title\":\"not-found-page_title__1a4A-\",\"text\":\"not-found-page_text__1bzml\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feed\":\"feed_feed__1Jw3v\",\"title\":\"feed_title__yRxeu\",\"content\":\"feed_content__9ySNd\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW\",\"link\":\"app-header_link__2y8TU\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"page\":\"ingredient-item-page_page__lnrsr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"order-list_list__38FhK\",\"listWide\":\"order-list_listWide__3Hzh6\"};"],"sourceRoot":""}