(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{106:function(e,t,n){e.exports={App:"app_App__3t73x"}},110:function(e,t,n){e.exports={bun:"bun_bun__1joMo"}},111:function(e,t,n){e.exports={constructorElement:"filling-item_constructorElement__2kUM6"}},113:function(e,t,n){e.exports={main:"main-content_main__1dLe8"}},114:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__AKixE"}},115:function(e,t,n){e.exports={profile:"profile_profile__26YER"}},122:function(e,t,n){},14:function(e,t,n){e.exports={order:"order-item_order__1NveV",orderWide:"order-item_orderWide__3dlkH",orderId:"order-item_orderId__vA4vU",date:"order-item_date__15k4U",titleContainer:"order-item_titleContainer__6aZoX",title:"order-item_title__2CJ7C",status:"order-item_status__39PoF",statusReady:"order-item_statusReady__32RVn",ingredients:"order-item_ingredients__1LBCm",ingredient:"order-item_ingredient__17mD1",ingredientImage:"order-item_ingredientImage__eE5ks",left:"order-item_left__eZgBf",leftNum:"order-item_leftNum__mZ4Rc",price:"order-item_price__2o1lz"}},17:function(e,t,n){e.exports={order:"order_order__1Y9Ze",orderId:"order_orderId__EtTUm",orderIdModal:"order_orderIdModal__I_Bjq",title:"order_title__3Nbmq",status:"order_status__1nqDp",statusReady:"order_statusReady__364lf",ingredients:"order_ingredients__37JOk",ingredient:"order_ingredient__k8CFr",image:"order_image__1bvzw",name:"order_name__3H9Zj",price:"order_price__28clU",date:"order_date__2j-AB",total:"order_total__27-wZ"}},207:function(e,t,n){},208:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),i=n(35),c=n.n(i),s=n(11),o=(n(122),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,218)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),i(e),c(e)}))}),l=n(46),d=n(10),u=n(2),j=n(9),b=n(3),O=n.n(b),m=n(79),p=n.n(m),f=n(5),g=n(0),_=function(){var e=Object(r.useState)({burger:"secondary",list:"secondary",profile:"secondary"}),t=Object(j.a)(e,2),n=t[0],a=t[1],i=O()(p.a.link,"p-5","mt-4","mb-4","mr-2"),c=O()("text","text_type_main-default","ml-2"),o=function(e,t){a(Object(u.a)(Object(u.a)({},n),{},Object(d.a)({},e,t?"secondary":"primary")))};return Object(g.jsxs)("header",{className:p.a.header,children:[Object(g.jsxs)(s.c,{to:"/",className:i,onMouseOver:function(){return o("burger",!1)},onMouseLeave:function(){return o("burger",!0)},children:["primary"===n.burger?Object(g.jsx)(f.BurgerIcon,{type:"primary"}):Object(g.jsx)(f.BurgerIcon,{type:"secondary"}),Object(g.jsx)("p",{className:c,children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(g.jsxs)(s.c,{to:"/feed",className:i,onMouseOver:function(){return o("list",!1)},onMouseLeave:function(){return o("list",!0)},children:["primary"===n.list?Object(g.jsx)(f.ListIcon,{type:"primary"}):Object(g.jsx)(f.ListIcon,{type:"secondary"}),Object(g.jsx)("p",{className:c,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]}),Object(g.jsx)(s.c,{to:"/",className:i,children:Object(g.jsx)(f.Logo,{})}),Object(g.jsxs)(s.c,{to:"/profile",className:i,onMouseOver:function(){return o("profile",!1)},onMouseLeave:function(){return o("profile",!0)},children:["primary"===n.profile?Object(g.jsx)(f.ProfileIcon,{type:"primary"}):Object(g.jsx)(f.ProfileIcon,{type:"secondary"}),Object(g.jsx)("p",{className:c,children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})]})},h=n(106),x=n.n(h),y="wss://norma.nomoreparties.space/orders",v="\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",I=[{text:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?",path:"/register",linkText:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},{text:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",path:"/forgot-password",linkText:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"}],N=[{text:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?",path:"/login",linkText:"\u0412\u043e\u0439\u0442\u0438"}],R=[{text:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?",path:"/login",linkText:"\u0412\u043e\u0439\u0442\u0438"}],S="\u0412\u0445\u043e\u0434",E="\u0412\u043e\u0439\u0442\u0438",C="\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",F="\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",T="\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",A="\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c",k="\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f",w="\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",D=[{text:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",link:"/profile",id:"profile"},{text:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",link:"/profile/orders",id:"orders"},{text:"\u0412\u044b\u0445\u043e\u0434",link:"/login",id:"logout"}],B=n(24),U=n.n(B),P=n(27),M=n(13),L=function(e){return{type:ee,error:e}},q=n(107),G=n(108),W=function(e,t,n){var r=(n=n||{}).expires;if("number"==typeof r&&r){var a=new Date;a.setTime(a.getTime()+1e3*r),r=n.expires=a}r&&r.toUTCString&&(n.expires=r.toUTCString());var i=e+"="+(t=encodeURIComponent(t));for(var c in n){i+="; "+c;var s=n[c];!0!==s&&(i+="="+s)}document.cookie=i},z=function(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0},Z=function(e){z(e)&&(document.cookie=e+"= ;expires=Thu, 01 Jan 1970 00:00:01 GMT")},V=function(e){console.log("set token",e.accessToken);var t=e.accessToken.split("Bearer ")[1],n=e.refreshToken;t&&W("token",t),n&&W("refreshToken",n)},H=function(e){switch(e){case"/profile":return"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435";case"/profile/orders":return"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c \u0441\u0432\u043e\u044e \u0438\u0441\u0442\u043e\u0440\u0438\u044e \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}},Q=function(e){var t=Array.from(e.split("."))[0].split("T"),n=Object(j.a)(t,2),r=n[0];return n[1]+" "+r},K=function(){function e(t){Object(q.a)(this,e),this.baseUrl=void 0,this.baseUrl=t.baseUrl}return Object(G.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():Promise.reject(new Error("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}},{key:"getIngredients",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/ingredients"),{headers:{"Content-Type":"application/json",Authorization:"Bearer "+z("token")}}).then((function(t){return e._getResponseData(t)}))}},{key:"makeOrder",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/orders"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+z("token")},body:JSON.stringify({ingredients:e})}).then((function(e){return t._getResponseData(e)}))}},{key:"login",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){return n._getResponseData(e)}))}},{key:"register",value:function(e,t,n){var r=this;return console.log(e,t,n),fetch("".concat(this.baseUrl,"/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:t,password:n})}).then((function(e){return r._getResponseData(e)}))}},{key:"refreshToken",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/auth/token"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:z("refreshToken")})}).then((function(t){return e._getResponseData(t)}))}},{key:"logout",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/auth/logout"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:z("refreshToken")})}).then((function(t){return e._getResponseData(t)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/auth/user"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+z("token")}}).then((function(t){return e._getResponseData(t)}))}},{key:"updateUserInfo",value:function(e,t,n){var r=this;return fetch("".concat(this.baseUrl,"/auth/user"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer "+z("token")},body:JSON.stringify({name:e,email:t,password:n})}).then((function(e){return r._getResponseData(e)}))}},{key:"requestResetPassword",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/password-reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return t._getResponseData(e)}))}},{key:"resetPassword",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/password-reset/reset"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})}).then((function(e){return n._getResponseData(e)}))}}]),e}(),J=new K({baseUrl:"https://norma.nomoreparties.space/api"}),X=J,Y="GET_INGREDIENTS_REQUEST",$="GET_INGREDIENTS_SUCCESS",ee="GET_INGREDIENTS_FAILED",te="GET_INGREDIENT_DETAILS",ne="OPEN_INGREDIENT_MODAL",re="CLOSE_INGREDIENT_MODAL",ae="TAB_SWITCH",ie="INCREASE_COUNT",ce="DECREASE_COUNT",se="RESET_COUNT",oe=function(){return function(e){e({type:Y}),X.getIngredients().then((function(t){var n;t&&t.success?e((n=t.data.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{qty:0})})),{type:$,ingredients:n})):e(L(""))})).catch((function(t){e(L(t.message))}))}},le={ingredients:[],currentIngredient:{},ingredientsRequest:!1,ingredientsFailed:!1,isIngredientModalOpen:!1,isLoading:!1,error:"",currentTab:"bun"},de="ADD_ITEM",ue="DELETE_ITEM",je="MAKE_ORDER_REQUEST",be="MAKE_ORDER_SUCCESS",Oe="MAKE_ORDER_FAILED",me="OPEN_ORDER_MODAL",pe="CLOSE_ORDER_MODAL",fe="OPEN_MADE_ORDER_MODAL",ge="CLOSE_MADE_ORDER_MODAL",_e="SWAP_INGREDIENTS",he=n(217),xe={totalPrice:0,orderedIngredients:{buns:[{_id:"0",price:0,name:"",image:"",type:"bun",qty:0}],filling:[]},orderRequest:!1,orderFailed:!1,orderId:0,isOrderModalOpen:!1,isMadeOrderModalOpen:!1,error:""},ye="LOGIN_FORM_SET_VALUE",ve="REGISTER_FORM_SET_VALUE",Ie="FORGOT_PASSWORD_FORM_SET_VALUE",Ne="RESET_PASSWORD_FORM_SET_VALUE",Re="PROFILE_FORM_SET_VALUE",Se="LOGIN_FORM_SUBMIT",Ee="REGISTER_FORM_SUBMIT",Ce="FORGOT_PASSWORD_FORM_SUBMIT",Fe="RESET_PASSWORD_FORM_SUBMIT",Te="LOGIN_FORM_SUBMIT_SUCCESS",Ae="REGISTER_FORM_SUBMIT_SUCCESS",ke="FORGOT_PASSWORD_FORM_SUBMIT_SUCCESS",we="RESET_PASSWORD_FORM_SUBMIT_SUCCESS",De="LOGIN_FORM_SUBMIT_FAILED",Be="REGISTER_FORM_SUBMIT_FAILED",Ue="FORGOT_PASSWORD_FORM_SUBMIT_FAILED",Pe="RESET_PASSWORD_FORM_SUBMIT_FAILED",Me="GET_USER_INFO_REQUEST",Le="GET_USER_INFO_REQUEST_FAILED",qe="GET_USER_INFO_REQUEST_SUCCESS",Ge="UPDATE_USER_INFO_REQUEST",We="UPDATE_USER_INFO_REQUEST_FAILED",ze="UPDATE_USER_INFO_REQUEST_SUCCESS",Ze="CLOSE_UPDATE_INFO_MODAL",Ve="LOGOUT_REQUEST",He="LOGOUT_REQUEST_SUCCESS",Qe="LOGOUT_REQUEST_FAILED",Ke=function(e,t){return{type:Re,field:e,value:t}},Je=function(e,t,n){"\u041e\u0448\u0438\u0431\u043a\u0430: 403"!==e.message&&"\u041e\u0448\u0438\u0431\u043a\u0430: 401"!==e.message||X.refreshToken().then((function(e){V(e),t(n)})).catch((function(e){return console.log(e)}))},Xe=function e(){return function(t){t({type:Me}),X.getUserInfo().then((function(e){t({type:qe,user:e.user})})).catch((function(n){console.log(n.message),Je(n,t,e),t({type:Le})}))}},Ye=function e(){return function(t,n){t({type:Ge});var r=n().user.profileForm,a=r.name,i=r.email,c=r.password;X.updateUserInfo(a,i,c).then((function(e){t({type:ze,user:e.user})})).catch((function(n){console.log(n.message),Je(n,t,e),t({type:We})}))}},$e={user:{email:"",name:""},loginForm:{email:"",password:""},registerForm:{email:"",password:"",name:""},forgotPasswordForm:{email:""},resetPasswordForm:{newPassword:"",token:""},profileForm:{email:"",password:"",name:""},registrationRequest:!1,registrationFailed:!1,loginRequest:!1,loginFailed:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,emailSent:!1,resetPasswordRequest:!1,resetPasswordFailed:!1,resetSuccess:!1,userInfoRequest:!1,userInfoFailed:!1,updateSuccess:!1,updateUserInfoRequest:!1,updateUserInfoRequestFailed:!1,logoutRequest:!1,logoutRequestFailed:!1},et="WS_CONNECTION_START",tt="WS_CONNECTION_SUCCESS",nt="WS_CONNECTION_ERROR",rt="WS_CONNECTION_CLOSED",at="WS_GET_MESSAGE",it={wsConnected:!1,wsStarted:!1,orders:[],totalOrdersCount:0,todayOrdersCount:0},ct=Object(P.b)({order:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case de:return Object(u.a)(Object(u.a)({},e),{},{totalPrice:e.totalPrice+("bun"===t.item.type?2*t.item.price-2*e.orderedIngredients.buns[0].price:t.item.price),orderedIngredients:Object(u.a)(Object(u.a)({},e.orderedIngredients),{},{buns:"bun"===t.item.type&&e.orderedIngredients.buns[0]._id!==t.item._id?[t.item,t.item]:Object(M.a)(e.orderedIngredients.buns),filling:"bun"!==t.item.type?[].concat(Object(M.a)(e.orderedIngredients.filling),[Object(u.a)(Object(u.a)({},t.item),{},{uid:Object(he.a)()})]):Object(M.a)(e.orderedIngredients.filling)})});case ue:return Object(u.a)(Object(u.a)({},e),{},{totalPrice:e.totalPrice-t.item.price,orderedIngredients:Object(u.a)(Object(u.a)({},e.orderedIngredients),{},{filling:"bun"!==t.item.type?Object(M.a)(e.orderedIngredients.filling).filter((function(e){return e.uid!==t.item.uid})):Object(M.a)(e.orderedIngredients.filling)})});case je:return Object(u.a)(Object(u.a)({},e),{},{orderRequest:!0,orderFailed:!1});case be:return Object(u.a)(Object(u.a)({},e),{},{orderRequest:!1,orderFailed:!1,orderId:t.orderId,orderedIngredients:xe.orderedIngredients,totalPrice:xe.totalPrice});case Oe:return Object(u.a)(Object(u.a)({},e),{},{orderRequest:!1,orderFailed:!0,orderId:xe.orderId,error:t.error});case me:return Object(u.a)(Object(u.a)({},e),{},{isOrderModalOpen:!0});case pe:return Object(u.a)(Object(u.a)({},e),{},{isOrderModalOpen:!1});case fe:return Object(u.a)(Object(u.a)({},e),{},{isMadeOrderModalOpen:!0});case ge:return Object(u.a)(Object(u.a)({},e),{},{isMadeOrderModalOpen:!1});case _e:return Object(u.a)(Object(u.a)({},e),{},{orderedIngredients:Object(u.a)(Object(u.a)({},e.orderedIngredients),{},{filling:Object(M.a)(t.filling)})});default:return e}},ingredients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(u.a)(Object(u.a)({},e),{},{ingredientsRequest:!0,ingredientsFailed:!1,error:le.error});case $:return Object(u.a)(Object(u.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!1,ingredients:t.ingredients,error:le.error});case ee:return Object(u.a)(Object(u.a)({},e),{},{ingredientsRequest:!1,ingredientsFailed:!0,error:t.error});case te:return Object(u.a)(Object(u.a)({},e),{},{currentIngredient:t.item});case ne:return Object(u.a)(Object(u.a)({},e),{},{isIngredientModalOpen:!0});case re:return Object(u.a)(Object(u.a)({},e),{},{currentIngredient:{},isIngredientModalOpen:!1});case ae:return Object(u.a)(Object(u.a)({},e),{},{currentTab:t.tab});case ie:return Object(u.a)(Object(u.a)({},e),{},{ingredients:Object(M.a)(e.ingredients).map((function(e){return"bun"===t.item.type&&"bun"===e.type?e._id===t.item._id?Object(u.a)(Object(u.a)({},e),{},{qty:1}):Object(u.a)(Object(u.a)({},e),{},{qty:0}):e._id===t.item._id?Object(u.a)(Object(u.a)({},e),{},{qty:++e.qty}):e}))});case ce:return Object(u.a)(Object(u.a)({},e),{},{ingredients:Object(M.a)(e.ingredients).map((function(e){return e._id===t.item._id?Object(u.a)(Object(u.a)({},e),{},{qty:--e.qty}):e}))});case se:return Object(u.a)(Object(u.a)({},e),{},{ingredients:Object(M.a)(e.ingredients).map((function(e){return Object(u.a)(Object(u.a)({},e),{},{qty:0})}))});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$e,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ye:return Object(u.a)(Object(u.a)({},e),{},{loginForm:Object(u.a)(Object(u.a)({},e.loginForm),{},Object(d.a)({},t.field,t.value))});case ve:return Object(u.a)(Object(u.a)({},e),{},{registerForm:Object(u.a)(Object(u.a)({},e.registerForm),{},Object(d.a)({},t.field,t.value))});case Ie:return Object(u.a)(Object(u.a)({},e),{},{forgotPasswordForm:Object(u.a)(Object(u.a)({},e.forgotPasswordForm),{},Object(d.a)({},t.field,t.value))});case Ne:return Object(u.a)(Object(u.a)({},e),{},{resetPasswordForm:Object(u.a)(Object(u.a)({},e.resetPasswordForm),{},Object(d.a)({},t.field,t.value))});case Re:return Object(u.a)(Object(u.a)({},e),{},{profileForm:Object(u.a)(Object(u.a)({},e.profileForm),{},Object(d.a)({},t.field,t.value))});case Ee:return Object(u.a)(Object(u.a)({},e),{},{registrationRequest:!0,registrationFailed:!1});case Ae:return Object(u.a)(Object(u.a)({},e),{},{registrationRequest:!1,registrationFailed:!1,registerForm:Object(u.a)({},$e.registerForm),user:t.data.user});case Be:return Object(u.a)(Object(u.a)({},e),{},{registrationRequest:!1,registrationFailed:!1});case Se:return Object(u.a)(Object(u.a)({},e),{},{loginRequest:!0,loginFailed:!1});case Te:return Object(u.a)(Object(u.a)({},e),{},{loginRequest:!1,loginFailed:!1,loginForm:Object(u.a)({},$e.loginForm),user:t.data.user});case De:return Object(u.a)(Object(u.a)({},e),{},{loginRequest:!1,loginFailed:!1});case Ce:return Object(u.a)(Object(u.a)({},e),{},{forgotPasswordRequest:!0,forgotPasswordFailed:!1,emailSent:!1});case ke:return Object(u.a)(Object(u.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordFailed:!1,forgotPasswordForm:Object(u.a)({},$e.forgotPasswordForm),emailSent:!0});case Ue:return Object(u.a)(Object(u.a)({},e),{},{forgotPasswordRequest:!1,forgotPasswordFailed:!1,emailSent:!1});case Fe:return Object(u.a)(Object(u.a)({},e),{},{resetPasswordRequest:!0,resetPasswordFailed:!1,resetSuccess:!1});case we:return Object(u.a)(Object(u.a)({},e),{},{resetPasswordRequest:!1,resetPasswordFailed:!1,resetPasswordForm:Object(u.a)({},$e.resetPasswordForm),resetSuccess:!0});case Pe:return Object(u.a)(Object(u.a)({},e),{},{resetPasswordRequest:!1,resetPasswordFailed:!1,resetSuccess:!1});case Me:return Object(u.a)(Object(u.a)({},e),{},{userInfoFailed:!1,userInfoRequest:!0});case qe:return Object(u.a)(Object(u.a)({},e),{},{userInfoFailed:!1,userInfoRequest:!1,user:t.user,profileForm:Object(u.a)(Object(u.a)({},e.profileForm),{},{name:t.user.name,email:t.user.email})});case Le:return Object(u.a)(Object(u.a)({},e),{},{userInfoFailed:!0,userInfoRequest:!1});case Ge:return Object(u.a)(Object(u.a)({},e),{},{updateUserInfoRequestFailed:!1,updateUserInfoRequest:!0,updateSuccess:!1});case ze:return Object(u.a)(Object(u.a)({},e),{},{updateUserInfoRequestFailed:!1,updateUserInfoRequest:!1,user:t.user,profileForm:Object(u.a)(Object(u.a)({},e.profileForm),{},{name:t.user.name,email:t.user.email}),updateSuccess:!0});case We:return Object(u.a)(Object(u.a)({},e),{},{updateUserInfoRequestFailed:!0,updateUserInfoRequest:!1,updateSuccess:!1});case Ze:return Object(u.a)(Object(u.a)({},e),{},{updateSuccess:!1});case Ve:return Object(u.a)(Object(u.a)({},e),{},{logoutRequest:!0,logoutRequestFailed:!1});case He:return Object(u.a)(Object(u.a)({},e),{},{user:$e.user,logoutRequest:!1,logoutRequestFailed:!1});case Qe:return Object(u.a)(Object(u.a)({},e),{},{logoutRequest:!1,logoutRequestFailed:!0});default:return e}},ws:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case et:return Object(u.a)(Object(u.a)({},e),{},{wsStarted:!0});case tt:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!0});case nt:return Object(u.a)(Object(u.a)({},e),{},{wsConnected:!1,wsStarted:!1});case rt:return Object(u.a)(Object(u.a)({},it),{},{wsConnected:!1,wsStarted:!1});case at:return Object(u.a)(Object(u.a)({},e),{},{orders:t.orders.orders&&t.orders.orders.length?Object(M.a)(t.orders.orders):[],totalOrdersCount:t.orders.total,todayOrdersCount:t.orders.totalToday});default:return e}}}),st=n(56),ot=["success"],lt=function(e,t){return function(n){var r=null;return function(a){return function(i){var c=n.dispatch,s=i.type,o=i.payload,l=t.wsInit,d=t.wsSendMessage,j=t.onOpen,b=t.onClose,O=t.onError,m=t.onMessage,p=z("token");if(s===l&&(r=p&&"withAuth"===o?new WebSocket("".concat(e,"?token=").concat(p)):new WebSocket("".concat(e,"/all"))),r&&(r.onopen=function(e){c({type:j,payload:e})},r.onerror=function(e){c({type:O,payload:e})},r.onmessage=function(e){var t=e.data,n=JSON.parse(t),r=(n.success,Object(st.a)(n,ot));c({type:m,orders:r})},r.onclose=function(e){c({type:b,payload:e})}),s===d){var f,g=Object(u.a)(Object(u.a)({},o),{},{token:p});null===(f=r)||void 0===f||f.send(JSON.stringify(g))}a(i)}}}},dt=n(109),ut={wsInit:et,onOpen:tt,onClose:rt,onError:nt,onMessage:at,wsSendMessage:"WS_SEND_MESSAGE"},jt="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:P.c,bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(P.d)(ct,e,jt(Object(P.a)(dt.a,lt(y,ut))))}(),Ot=function(){return Object(l.b)()},mt=l.c,pt=bt,ft=n(6),gt=function(){var e=mt((function(e){return e.ingredients.ingredients})),t=Object(ft.i)().id,n=e.find((function(e){return e._id===t})),r=O()(U.a.name,"text text_type_main-medium","mt-4"),a=O()(U.a.text,"text text_type_main-default"),i=O()(U.a.text,"text text_type_digits-default");return Object(g.jsxs)("div",{className:U.a.details,children:[Object(g.jsx)("img",{className:U.a.image,src:n&&n.image?n.image:"",alt:n&&n.name?n.name:""}),Object(g.jsx)("p",{className:r,children:n&&n.name?n.name:""}),Object(g.jsxs)("div",{className:U.a.nutritionalValue,children:[Object(g.jsx)("p",{className:a,children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(g.jsx)("p",{className:i,children:n&&n.calories?n.calories:0})]}),Object(g.jsxs)("div",{className:U.a.nutritionalValue,children:[Object(g.jsx)("p",{className:a,children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(g.jsx)("p",{className:i,children:n&&n.proteins?n.proteins:0})]}),Object(g.jsxs)("div",{className:U.a.nutritionalValue,children:[Object(g.jsx)("p",{className:a,children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(g.jsx)("p",{className:i,children:n&&n.fat?n.fat:0})]}),Object(g.jsxs)("div",{className:U.a.nutritionalValue,children:[Object(g.jsx)("p",{className:a,children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(g.jsx)("p",{className:i,children:n&&n.carbohydrates?n.carbohydrates:0})]})]})},_t=n(36),ht=n.n(_t),xt=n.p+"static/media/done.df2db76e.svg",yt=function(){var e=mt((function(e){return e.order})).orderId,t=O()(ht.a.id,"text text_type_digits-large","mt-4"),n=O()(ht.a.info,"mb-2","text text_type_main-default"),r=O()(ht.a.title,"text text_type_main-medium");return Object(g.jsxs)("div",{className:ht.a.order,children:[Object(g.jsx)("p",{className:t,children:e}),Object(g.jsx)("p",{className:r,children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(g.jsx)("img",{className:ht.a.image,src:xt,alt:"\u0413\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u044c \u0437\u0430\u043a\u0430\u0437\u0430."}),Object(g.jsx)("p",{className:n,children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(g.jsx)("p",{className:n,children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},vt=n(37),It=n.n(vt),Nt=n(110),Rt=n.n(Nt),St=function(e){var t=e.top,n=mt((function(e){return e.order.orderedIngredients.buns[0]}));return Object(g.jsx)("div",{className:Rt.a.bun,children:n&&n.name&&Object(g.jsx)(f.ConstructorElement,{type:t?"top":"bottom",isLocked:!0,text:n.name+(t?" (\u0432\u0435\u0440\u0445)":" (\u043d\u0438\u0437)"),price:n.price,thumbnail:n.image})})},Et=n(216),Ct=n(215),Ft=n(111),Tt=n.n(Ft),At=function(e){var t=e.index,n=e.swapIngredients,a=e.item,i=Object(r.useRef)(null),c=a.name,s=a._id,o=a.uid,l=a.image,d=a.price,u=Ot(),b=Object(Ct.a)({type:"ingredient1",item:function(){return{_id:s,index:t}},collect:function(e){return{isDragging:e.isDragging()}}}),O=Object(j.a)(b,2),m=O[0].isDragging,p=O[1],_=Object(Et.a)({accept:"ingredient1",collect:function(e){return{isHover:e.isOver()}},hover:function(e,r){var a=e.index,c=t;i.current&&a!==c&&(n(a,c),e.index=c)}}),h=Object(j.a)(_,2),x=h[0].isHover;p((0,h[1])(i));return Object(g.jsxs)("li",{className:Tt.a.constructorElement,ref:i,style:x||m?{opacity:0}:{opacity:1},draggable:!0,children:[Object(g.jsx)(f.DragIcon,{type:"primary"}),Object(g.jsx)(f.ConstructorElement,{text:c,price:d,thumbnail:l,handleClose:function(){return u({type:ue,item:e={_id:s,price:d,uid:o}}),void u({type:ce,item:e});var e}})]})},kt=function(){var e=mt((function(e){return e.order})),t=e.orderedIngredients,n=e.totalPrice,a=e.orderRequest,i=mt((function(e){return e.user.user})),c=Object(ft.g)(),s=Ot(),o=Object(Et.a)({accept:"ingredient",collect:function(e){return{isHover:e.isOver()}},drop:function(e){s({type:de,item:e}),s({type:ie,item:e})}}),l=Object(j.a)(o,2),d=l[0].isHover,u=l[1],b=O()("text text_type_digits-medium","mr-2"),m=O()(It.a.burgerConstructor,"".concat(d&&It.a.hoveredContainer)),p=Object(r.useCallback)((function(e,n){var r=t.filling[e],a=Object(M.a)(t.filling);a.splice(e,1),a.splice(n,0,r),s({type:_e,filling:a})}),[s,t.filling]),_=Object(r.useMemo)((function(){return t.filling&&t.filling.length>0&&t.filling.map((function(e,t){return Object(g.jsx)(At,{index:t,swapIngredients:p,item:e},e.uid)}))}),[t]);return a?Object(g.jsx)("p",{style:{minHeight:760,marginTop:100,display:"flex",alignItems:"center",justifyContent:"center",width:600},children:"Loading..."}):Object(g.jsxs)("section",{className:m,ref:u,id:"drop-area",children:[Object(g.jsx)(St,{top:!0}),Object(g.jsx)("ul",{className:It.a.list,children:_}),Object(g.jsx)(St,{top:!1}),(t.filling.length||t.buns.length>1)&&Object(g.jsxs)("div",{className:It.a.makeOrderInfo,children:[Object(g.jsxs)("div",{className:It.a.price,children:[Object(g.jsx)("p",{className:b,children:n}),Object(g.jsx)(f.CurrencyIcon,{type:"primary"})]}),Object(g.jsx)(f.Button,{type:"primary",size:"large",onClick:function(){i.name?(s({type:se}),console.log(t),s(function(e){return function(t){t({type:je}),X.makeOrder(e.buns.concat(e.filling).map((function(e){return e._id}))).then((function(e){e&&e.success?(t({type:be,orderId:e.order.number}),t({type:me})):t({type:Oe,error:""})})).catch((function(e){t({type:Oe,error:e.message})}))}}(t))):c.replace({pathname:"/login"})},children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},wt=n(28),Dt=n.n(wt),Bt=n(38),Ut=n.n(Bt),Pt=function(e){var t=e.item,n=Ot(),r=Object(ft.h)(),a=Object(Ct.a)({type:"ingredient",item:function(){return t},collect:function(e){return{isDragging:e.isDragging()}}}),i=Object(j.a)(a,2),c=i[0].isDragging,o=i[1],l=O()(Ut.a.card,"".concat(c&&Ut.a.dragCard)),d=O()(Ut.a.text,"text text_type_main-default"),u=O()("text text_type_digits-default",Ut.a.digit,"mt-1 mb-1");return Object(g.jsxs)(s.c,{to:{pathname:"/ingredients/".concat(t._id),state:{background:r}},className:l,onClick:function(){n({type:ne}),n({type:te,item:t})},ref:o,draggable:!0,id:"ingredient",children:[t.qty>0&&Object(g.jsx)(f.Counter,{count:t.qty,size:"default"}),Object(g.jsx)("img",{src:t.image,alt:t.name}),Object(g.jsxs)("div",{className:Ut.a.price,children:[Object(g.jsx)("p",{className:u,children:t.price}),Object(g.jsx)(f.CurrencyIcon,{type:"primary"})]}),Object(g.jsx)("p",{className:d,children:t.name})]})},Mt=n(57),Lt=n.n(Mt),qt=function(e){var t=e.anchorId,n=e.title,r=e.data,a=O()("text text_type_main-medium",Lt.a.title);return Object(g.jsxs)("div",{className:Lt.a.ingredients,id:t,children:[Object(g.jsx)("h2",{className:a,children:n}),Object(g.jsx)("ul",{className:Lt.a.list,children:r.map((function(e,t){return Object(g.jsx)(Pt,{item:e},e._id+t)}))})]})},Gt=function(){var e=Ot(),t=O()(Dt.a.title,"text text_type_main-large"),n=mt((function(e){return{data:e.ingredients.ingredients,currentTab:e.ingredients.currentTab}})),a=n.data,i=n.currentTab,c=function(){var t=document.getElementById("scrollable-list"),n=document.getElementById("type-bun"),r=document.getElementById("type-sauce"),a=document.getElementById("type-main");if(n&&a&&r&&t){var i=t.getBoundingClientRect().top;n.getBoundingClientRect().top<=i&&n.getBoundingClientRect().top>0&&e({type:ae,tab:"bun"}),a.getBoundingClientRect().top<=i&&a.getBoundingClientRect().top>0&&e({type:ae,tab:"main"}),r.getBoundingClientRect().top<=i&&r.getBoundingClientRect().top>0&&e({type:ae,tab:"sauce"})}},s=function(e){e.preventDefault();var t=document.getElementById("scrollable-list"),n=document.getElementById("type-".concat(e.currentTarget.id));t&&n&&t.scrollTo({top:n.offsetTop,behavior:"smooth"})},o=function(t){e({type:ae,tab:t})},l=Object(r.useMemo)((function(){return Object(g.jsxs)("ul",{className:Dt.a.scrollableList,id:"scrollable-list",onScroll:c,children:[Object(g.jsx)("li",{className:Dt.a.scrollableListItem,children:Object(g.jsx)(qt,{data:a.filter((function(e){return"bun"===e.type})),anchorId:"type-bun",title:"\u0411\u0443\u043b\u043a\u0438"})}),Object(g.jsx)("li",{className:Dt.a.scrollableListItem,children:Object(g.jsx)(qt,{data:a.filter((function(e){return"sauce"===e.type})),anchorId:"type-sauce",title:"\u0421\u043e\u0443\u0441\u044b"})}),Object(g.jsx)("li",{className:Dt.a.scrollableListItem,children:Object(g.jsx)(qt,{data:a.filter((function(e){return"main"===e.type})),anchorId:"type-main",title:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]})}),[a]);return Object(g.jsxs)("section",{className:Dt.a.ingredients,children:[Object(g.jsx)("h1",{className:t,children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(g.jsx)("nav",{children:Object(g.jsxs)("ul",{className:Dt.a.tabs,children:[Object(g.jsx)("li",{onClick:s,id:"bun",children:Object(g.jsx)(f.Tab,{value:"bun",active:"bun"===i,onClick:function(){return o("bun")},children:"\u0411\u0443\u043b\u043a\u0438"})}),Object(g.jsx)("li",{onClick:s,id:"sauce",children:Object(g.jsx)(f.Tab,{value:"sauce",active:"sauce"===i,onClick:function(){return o("sauce")},children:"\u0421\u043e\u0443\u0441\u044b"})}),Object(g.jsx)("li",{onClick:s,id:"main",children:Object(g.jsx)(f.Tab,{value:"main",active:"main"===i,onClick:function(){return o("main")},children:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"})})]})}),l]})},Wt=n(113),zt=n.n(Wt),Zt=n(214),Vt=n(116),Ht=function(){return Object(g.jsx)("main",{className:zt.a.main,children:Object(g.jsxs)(Zt.a,{backend:Vt.a,children:[Object(g.jsx)(Gt,{}),Object(g.jsx)(kt,{})]})})},Qt=n(47),Kt=n.n(Qt),Jt=n(114),Xt=n.n(Jt),Yt=function(e){return Object(g.jsx)("section",{className:Xt.a.overlay,onClick:e.handleCloseByClickOnOverlay,children:e.children})},$t=function(e){var t=Object(r.useState)(!1),n=Object(j.a)(t,2),a=n[0],i=n[1],s=Object(ft.g)(),o=Object(ft.h)(),l=document.getElementById("react-modals"),d=O()(Kt.a.title,"text text_type_main-large"),u=function(){i(!a)},b=function(){e.handleModalClose(),s.replace({pathname:o.state&&o.state.background?"".concat(o.state.background.pathname):"/"})},m=Object(r.useCallback)((function(e){"Escape"===e.key&&b()}),[]);Object(r.useEffect)((function(){return document.addEventListener("keydown",m),function(){document.removeEventListener("keydown",m)}}),[]);return l?c.a.createPortal(Object(g.jsx)(Yt,{handleCloseByClickOnOverlay:function(e){e.target===e.currentTarget&&b()},children:Object(g.jsxs)("div",{className:Kt.a.modal,children:[Object(g.jsxs)("div",{className:Kt.a.modalHeader,children:[Object(g.jsx)("h2",{className:d,children:e.title}),Object(g.jsx)("div",{className:Kt.a.closeButton,onMouseOver:u,onMouseLeave:u,onClick:b,children:a?Object(g.jsx)(f.CloseIcon,{type:"secondary"}):Object(g.jsx)(f.CloseIcon,{type:"primary"})})]}),e.children]})}),l):null},en=n(32),tn=n.n(en),nn=(n(207),function(e){var t=e.children,n=e.title,r=e.buttonTitle,a=e.links,i=e.onSubmit,c=Object(ft.h)();if(mt((function(e){return e.user.user})).name){var o=(c.state||{from:{pathname:"/"}}).from;return Object(g.jsx)(ft.a,{to:o})}var l=O()(tn.a.title,"text text_type_main-medium"),d=O()("text text_type_main-small",tn.a.text),u=O()("text text_type_main-small",tn.a.link);return Object(g.jsxs)("form",{className:tn.a.form,onSubmit:i,children:[Object(g.jsx)("h2",{className:l,children:n}),t,Object(g.jsx)(f.Button,{type:"primary",size:"medium",children:r}),Object(g.jsx)("ul",{className:tn.a.list,children:a.map((function(e,t){return Object(g.jsxs)("li",{className:tn.a.listItem,children:[Object(g.jsx)("p",{className:d,children:e.text}),Object(g.jsx)(s.c,{to:e.path,className:u,children:e.linkText})]},t)}))})]})}),rn=function(){var e=mt((function(e){return Object(u.a)({},e.user.loginForm)})),t=e.email,n=e.password,r=mt((function(e){return e.user.user.name})),a=Object(ft.h)(),i=Ot(),c=S,s=E;if(r){var o=(a.state?a.state:{from:{pathname:"/"}}).from;return Object(g.jsx)(ft.a,{to:o.pathname})}var l=function(e){var t=e.target,n=t.name,r=t.value;i(function(e,t){return{type:ye,field:e,value:t}}(n,r))};return Object(g.jsxs)(nn,{title:c,buttonTitle:s,links:I,onSubmit:function(e){e.preventDefault(),i((function(e,t){e({type:Se});var n=t().user.loginForm,r=n.email,a=n.password;X.login(r,a).then((function(t){V(t),e({type:Te,data:t})})).catch((function(t){console.log(t),e({type:De})}))}))},children:[Object(g.jsx)(f.Input,{type:"email",onChange:l,value:t,name:"email",placeholder:"E-mail"}),Object(g.jsx)(f.PasswordInput,{value:n,name:"password",onChange:l,size:"default"})]})},an=function(){var e=mt((function(e){return Object(u.a)({},e.user.registerForm)})),t=e.email,n=e.password,r=e.name,a=mt((function(e){return e.user.user.name})),i=Ot(),c=C,s=F,o=Object(ft.h)(),l=function(e){var t=e.target,n=t.name,r=t.value;i(function(e,t){return{type:ve,field:e,value:t}}(n,r))};if(a){var d=(o.state?o.state:{from:{pathname:"/"}}).from;return Object(g.jsx)(ft.a,{to:d})}return Object(g.jsxs)(nn,{title:c,buttonTitle:s,links:N,onSubmit:function(e){e.preventDefault(),i((function(e,t){e({type:Ee});var n=t().user.registerForm,r=n.name,a=n.email,i=n.password;X.register(r,a,i).then((function(t){V(t),e({type:Ae,data:t})})).catch((function(t){console.log(t),e({type:Be})}))}))},children:[Object(g.jsx)(f.Input,{type:"text",onChange:l,value:r,name:"name",placeholder:"\u0418\u043c\u044f"}),Object(g.jsx)(f.Input,{type:"email",onChange:l,value:t,name:"email",placeholder:"E-mail"}),Object(g.jsx)(f.PasswordInput,{value:n,name:"password",onChange:l,size:"default"})]})},cn=function(){var e=Object(ft.g)(),t=mt((function(e){return Object(u.a)({},e.user.forgotPasswordForm)})).email,n=mt((function(e){return e.user.user.name})),a=mt((function(e){return e.user.emailSent})),i=Ot(),c=Object(ft.h)(),s=T,o=A;Object(r.useEffect)((function(){a&&e.replace({pathname:"/reset-password"})}),[a]);if(n){var l=(c.state?c.state:{from:{pathname:"/"}}).from;return Object(g.jsx)(ft.a,{to:l})}return Object(g.jsx)(nn,{title:s,buttonTitle:o,links:R,onSubmit:function(e){e.preventDefault(),i((function(e,t){e({type:Ce});var n=t().user.forgotPasswordForm.email;X.requestResetPassword(n).then((function(t){e({type:ke}),localStorage.setItem("emailSent",JSON.stringify(!0))})).catch((function(t){console.log(t),e({type:Ue})}))}))},children:Object(g.jsx)(f.Input,{type:"email",value:t,name:"email",onChange:function(e){var t=e.target,n=t.name,r=t.value;i(function(e,t){return{type:Ie,field:e,value:t}}(n,r))},size:"default",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail"})})},sn=n(115),on=n.n(sn),ln=n(39),dn=n.n(ln),un=function(){var e=Ot(),t=Object(ft.j)().path,n=O()(dn.a.link,"text text_type_main-medium"),r=O()(dn.a.text,"text text_type_main-default text_color_inactive"),a=function(t){"logout"===t.target.id&&e((function(e){e({type:Ve}),X.logout().then((function(t){Z("token"),Z("refreshToken"),e({type:He})})).catch((function(t){console.log(t),e({type:Qe})}))}))};return Object(g.jsxs)("nav",{children:[Object(g.jsx)("ul",{className:dn.a.linkList,children:D.map((function(e,r){return Object(g.jsx)("li",{className:dn.a.linkListItem,children:Object(g.jsx)(s.c,{id:e.id,to:e.link,onClick:a,className:n,activeClassName:"".concat(t===e.link&&dn.a.activeLink),children:e.text})},r)}))}),Object(g.jsx)("p",{className:r,children:H(t)})]})},jn=function(e){var t=Ot(),n=mt((function(e){return e.user.user.name}));return Object(r.useEffect)((function(){return n&&t({type:et,payload:"withAuth"}),function(){t({type:rt})}}),[t]),Object(g.jsxs)("section",{className:on.a.profile,children:[Object(g.jsx)(un,{}),e.children]})},bn=function(){var e=Object(r.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],i=Object(ft.g)(),c=mt((function(e){return e.user.resetSuccess})),s=mt((function(e){return Object(u.a)({},e.user.resetPasswordForm)})),o=s.token,l=s.newPassword,d=mt((function(e){return e.user.user.name})),b=Ot(),O=k,m=w,p=Object(ft.h)();if(Object(r.useEffect)((function(){c&&i.replace({pathname:"/login"})}),[c]),d){var _=(p.state?p.state:{from:{pathname:"/"}}).from;return Object(g.jsx)(ft.a,{to:_})}if(!localStorage.getItem("emailSent"))return Object(g.jsx)(ft.a,{to:{pathname:"/forgot-password"}});var h=function(e){var t=e.target,n=t.name,r=t.value;b(function(e,t){return{type:Ne,field:e,value:t}}(n,r))};return Object(g.jsxs)(nn,{title:O,buttonTitle:m,links:R,onSubmit:function(e){e.preventDefault(),b((function(e,t){e({type:Fe});var n=t().user.resetPasswordForm,r=n.newPassword,a=n.token;X.resetPassword(r,a).then((function(t){e({type:we}),localStorage.removeItem("emailSent")})).catch((function(t){console.log(t),e({type:Pe})}))}))},children:[Object(g.jsx)(f.Input,{type:n?"text":"password",value:l,name:"newPassword",onChange:h,size:"default",icon:n?"HideIcon":"ShowIcon",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c",onIconClick:function(){a(!n)}}),Object(g.jsx)(f.Input,{type:"text",value:o,name:"token",onChange:h,size:"default",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"})]})},On=n(83),mn=n.n(On),pn=function(){var e=O()(mn.a.title,"text text_type_main-large");return Object(g.jsxs)("section",{className:mn.a.page,children:[Object(g.jsx)("h1",{className:e,children:v}),Object(g.jsx)(gt,{})]})},fn=["children"],gn=function(e){var t=e.children,n=Object(st.a)(e,fn),a=Ot(),i=mt((function(e){return e.user.user.name})),c=Object(r.useState)(!1),s=Object(j.a)(c,2),o=s[0],l=s[1];return Object(r.useEffect)((function(){a(Xe()),l(!0)}),[a]),o?Object(g.jsx)(ft.b,Object(u.a)(Object(u.a)({},n),{},{render:function(e){var n=e.location;return i?t:Object(g.jsx)(ft.a,{to:{pathname:"/login",state:{from:n}}})}})):null},_n=n(40),hn=n.n(_n),xn=function(){var e=mt((function(e){return Object(u.a)({},e.user.profileForm)})),t=e.email,n=e.password,a=e.name,i={name:!1,email:!1,password:!1},c=Object(r.useState)(i),s=Object(j.a)(c,2),o=s[0],l=s[1],b=Ot(),O=Object(r.useRef)(null),m=Object(r.useRef)(null),p=Object(r.useRef)(null),_=function(e){var t=e.target,n=t.name,r=t.value;b(Ke(n,r))},h=function(e){b(Ke(e,""))},x=function(e){e&&e.current&&(l(Object(u.a)(Object(u.a)({},i),{},Object(d.a)({},e.current.name,!0))),setTimeout((function(){var t;null===(t=e.current)||void 0===t||t.focus()}),0))};return Object(g.jsxs)("form",{onSubmit:function(e){e.preventDefault(),b(Ye())},children:[Object(g.jsxs)("ul",{className:hn.a.inputList,children:[Object(g.jsx)("li",{className:hn.a.inputListItem,children:Object(g.jsx)(f.Input,{type:"text",name:"name",value:a,onChange:_,placeholder:"\u0418\u043c\u044f",ref:O,icon:o.name?"CloseIcon":"EditIcon",onIconClick:function(){return o.name?h("name"):x(O)}})}),Object(g.jsx)("li",{className:hn.a.inputListItem,children:Object(g.jsx)(f.Input,{type:"email",name:"email",value:t,onChange:_,placeholder:"\u041b\u043e\u0433\u0438\u043d",ref:m,icon:o.email?"CloseIcon":"EditIcon",onIconClick:function(){return o.email?h("email"):x(m)}})}),Object(g.jsx)("li",{className:hn.a.inputListItem,children:Object(g.jsx)(f.Input,{type:"password",name:"password",value:n,onChange:_,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",ref:p,icon:o.password?"CloseIcon":"EditIcon",onIconClick:function(){return o.password?h("password"):x(p)}})})]}),Object(g.jsxs)("div",{className:hn.a.buttons,children:[Object(g.jsx)(f.Button,{type:"secondary",onClick:function(e){e.preventDefault(),b(Xe())},children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"}),Object(g.jsx)(f.Button,{type:"primary",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})]})},yn=n(58),vn=n.n(yn),In=function(){var e=Object(ft.g)(),t=O()(vn.a.title,"text text_type_main-large"),n=O()(vn.a.text,"text text_type_main-medium");return Object(g.jsxs)("section",{className:vn.a.page,children:[Object(g.jsx)("h1",{className:t,children:"404"}),Object(g.jsx)("p",{className:n,children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(g.jsx)(f.Button,{type:"secondary",onClick:function(){e.goBack()},children:"\u041d\u0430\u0437\u0430\u0434"})]})},Nn=n(26),Rn=n.n(Nn),Sn=function(){var e=mt((function(e){return e.ws})),t=e.totalOrdersCount,n=e.todayOrdersCount,r=e.orders,a=O()(Rn.a.text,"text text_type_main-medium"),i=O()(Rn.a.orderId,"text text_type_digits-default"),c=r.filter((function(e){return"done"===e.status})).reverse().slice(r.length-23,r.length),s=r.filter((function(e){return"done"!==e.status})).reverse().slice(r.length-23,r.length),o=O()(Rn.a.count,"text text_type_digits-large");return Object(g.jsxs)("div",{className:Rn.a.info,children:[Object(g.jsxs)("div",{className:Rn.a.orderNums,children:[Object(g.jsx)("p",{className:a,children:"\u0413\u043e\u0442\u043e\u0432\u044b:"}),Object(g.jsx)("ul",{className:Rn.a.list,children:c&&c.length&&c.map((function(e){return Object(g.jsx)("p",{className:i,children:e.number},e._id)}))})]}),Object(g.jsxs)("div",{className:Rn.a.orderNums,children:[Object(g.jsx)("p",{className:a,children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"}),Object(g.jsx)("ul",{className:Rn.a.list,children:s&&s.length&&s.map((function(e){return Object(g.jsx)("p",{className:i,children:e.number},e._id)}))})]}),Object(g.jsx)("p",{className:a,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(g.jsx)("p",{className:o,children:t}),Object(g.jsx)("p",{className:a,children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(g.jsx)("p",{className:o,children:n})]})},En=n(14),Cn=n.n(En),Fn=function(e){var t,n=e.order,a=e.wide,i=Object(r.useState)(!1),c=Object(j.a)(i,2),o=c[0],l=c[1],u=Object(r.useState)(0),b=Object(j.a)(u,2),m=b[0],p=b[1],_=Ot(),h=Object(ft.h)(),x=Object(ft.j)().url,y=mt((function(e){return e.ingredients.ingredients})),v=n.number,I=n.createdAt,N=n.name,R=n.ingredients,S=n.status,E=0,C=R.map((function(e){return y.find((function(t){return t._id===e&&(E+=t.price),t._id===e}))})),F=O()(Cn.a.order,"mb-4",a&&Cn.a.orderWide),T=O()(Cn.a.orderId,"text text_type_digits-default"),A=O()(Cn.a.date,"text text_type_main-small"),k=O()(Cn.a.title,"text text_type_main-medium"),w=O()(Cn.a.price,"text text_type_digits-default"),D=O()(Cn.a.leftNum,"text text_type_digits-small"),B=O()((t={},Object(d.a)(t,Cn.a.status,!0),Object(d.a)(t,Cn.a.statusReady,"done"===S),Object(d.a)(t,"text text_type_main-small",!0),t));Object(r.useEffect)((function(){C.length>6?(p(C.length-6),l(!0)):(p(0),l(!1))}),[]);return Object(g.jsx)("li",{children:Object(g.jsxs)(s.b,{to:{pathname:"".concat(x,"/").concat(v),state:{background:h}},className:F,onClick:function(){_({type:fe})},children:[Object(g.jsxs)("p",{className:T,children:["#",v]}),Object(g.jsx)("p",{className:A,children:Q(I)}),Object(g.jsxs)("div",{className:Cn.a.titleContainer,children:[Object(g.jsx)("h3",{className:k,children:N}),a&&Object(g.jsx)("p",{className:B,children:"done"===S?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0421\u043e\u0437\u0434\u0430\u043d"})]}),Object(g.jsx)("ul",{className:Cn.a.ingredients,children:C&&C.length&&C.reverse().slice(0,6).map((function(e,t){return Object(g.jsxs)("li",{className:Cn.a.ingredient,children:[Object(g.jsx)("img",{className:Cn.a.ingredientImage,src:e&&e.image?e.image:"data:image/png;base64,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",alt:e&&e.name?e.name:""}),o&&Object(g.jsx)("div",{className:Cn.a.left,children:Object(g.jsxs)("p",{className:D,children:["+",m]})})]},t)}))}),Object(g.jsxs)("p",{className:w,children:[E," ",Object(g.jsx)(f.CurrencyIcon,{type:"primary"})]})]})})},Tn=n(84),An=n.n(Tn),kn=function(e){var t=e.wide,n=mt((function(e){return e.ws})).orders,r=O()(An.a.list,t&&An.a.listWide);return Object(g.jsx)("ul",{className:r,children:n&&n.length&&n.sort((function(e,t){return e.createdAt<t.createdAt?1:e.createdAt===t.createdAt?0:-1})).map((function(e){return Object(g.jsx)(Fn,{order:e,wide:t},e._id)}))})},wn=n(59),Dn=n.n(wn),Bn=function(){var e=Ot(),t=O()(Dn.a.title,"text text_type_main-large","mb-5");return Object(r.useEffect)((function(){return e({type:et,payload:"withoutAuth"}),function(){e({type:rt})}}),[e]),Object(g.jsxs)("section",{className:Dn.a.feed,children:[Object(g.jsx)("h1",{className:t,children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(g.jsxs)("div",{className:Dn.a.content,children:[Object(g.jsx)(kn,{wide:!1}),Object(g.jsx)(Sn,{})]})]})},Un=n(17),Pn=n.n(Un),Mn=function(e){var t,n,a=e.isModal,i=Object(ft.i)().id,c=Object(ft.j)().url,s=Ot(),o=mt((function(e){return e.ws.orders})),l=Object(r.useState)(0),b=Object(j.a)(l,2),m=b[0],p=b[1],_=o.find((function(e){return e.number&&e.number===Number(i)})),h=Object(r.useState)([]),x=Object(j.a)(h,2),y=x[0],v=x[1],I=mt((function(e){return e.ingredients.ingredients}));Object(r.useEffect)((function(){return o.length||(c.match("feed")?s({type:et,payload:"withoutAuth"}):s({type:et,payload:"withAuth"})),function(){o&&s({type:rt})}}),[s]),Object(r.useEffect)((function(){if(_&&I&&_.ingredients){var e=0,t=_.ingredients.map((function(t){var n=I.find((function(n){return n._id===t&&(e+=n.price),n._id===t}));return Object(u.a)(Object(u.a)({},n),{},{qty:1})}));v(t.reduce((function(e,t){var n=e.findIndex((function(e){return e._id===t._id}));return n<0?[].concat(Object(M.a)(e),[t]):(e[n].qty+=1,e)}),[]).reverse()),p(e)}}),[I,_]);var N=O()((t={},Object(d.a)(t,Pn.a.orderId,!0),Object(d.a)(t,Pn.a.orderIdModal,a),Object(d.a)(t,"text text_type_digits-default",!0),t)),R=O()(Pn.a.date,"text text_type_main-small"),S=O()(Pn.a.title,"text text_type_main-medium"),E=O()(Pn.a.name,"text text_type_main-small"),C=O()(Pn.a.price,"text text_type_digits-default"),F=O()((n={},Object(d.a)(n,Pn.a.status,!0),Object(d.a)(n,Pn.a.statusReady,!0),Object(d.a)(n,"text text_type_main-small",!0),n));return Object(g.jsxs)("section",{className:Pn.a.order,children:[Object(g.jsxs)("p",{className:N,children:["#",_&&_.number?_.number:0]}),Object(g.jsx)("h3",{className:S,children:_&&_.name?_.name:""}),Object(g.jsx)("p",{className:F,children:_&&"done"===_.status?"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d":"\u0421\u043e\u0437\u0434\u0430\u043d"}),Object(g.jsx)("p",{className:S,children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(g.jsx)("ul",{className:Pn.a.ingredients,children:y&&y.length&&y.map((function(e){return Object(g.jsxs)("li",{className:Pn.a.ingredient,children:[Object(g.jsx)("img",{className:Pn.a.image,alt:e&&e.name?e.name:"",src:e&&e.image?e.image:""}),Object(g.jsx)("p",{className:E,children:e&&e.name?e.name:""}),Object(g.jsxs)("p",{className:C,children:[e.qty>1?"".concat(e.qty," x "):"",e.price," ",Object(g.jsx)(f.CurrencyIcon,{type:"primary"})]})]},e._id)}))}),Object(g.jsxs)("div",{className:Pn.a.total,children:[Object(g.jsx)("p",{className:R,children:_&&_.createdAt?Q(_.createdAt):""}),Object(g.jsxs)("p",{className:C,children:[m," ",Object(g.jsx)(f.CurrencyIcon,{type:"primary"})]})]})]})};var Ln=function(){var e,t=Object(ft.g)(),n=mt((function(e){return e.order})),a=n.isOrderModalOpen,i=n.isMadeOrderModalOpen,c=mt((function(e){return e.ingredients})).isIngredientModalOpen,s=mt((function(e){return e.ingredients.ingredientsRequest})),o=mt((function(e){return e.user.updateSuccess})),l=Object(ft.h)();"POP"!==t.action&&l.state&&(e=l.state.background);var d=Ot();Object(r.useEffect)((function(){d(oe())}),[d]),Object(r.useEffect)((function(){d(Xe())}),[d]);var u=function(){d({type:pe}),d({type:re}),d({type:Ze}),d({type:ge})};return Object(g.jsxs)("div",{className:x.a.App,children:[Object(g.jsx)(_,{}),Object(g.jsxs)(ft.d,{location:e||l,children:[Object(g.jsxs)(ft.b,{exact:!0,path:"/",children:[s&&Object(g.jsx)("p",{children:"Loading..."}),!s&&Object(g.jsx)(Ht,{})]}),Object(g.jsx)(gn,{exact:!0,path:"/profile",children:Object(g.jsx)(jn,{children:Object(g.jsx)(xn,{})})}),Object(g.jsx)(gn,{exact:!0,path:"/profile/orders",children:Object(g.jsx)(jn,{children:Object(g.jsx)(kn,{wide:!0})})}),Object(g.jsx)(gn,{path:"/profile/orders/:id",children:Object(g.jsx)(Mn,{isModal:!1})}),Object(g.jsx)(ft.b,{exact:!0,path:"/login",children:Object(g.jsx)(rn,{})}),Object(g.jsx)(ft.b,{exact:!0,path:"/register",children:Object(g.jsx)(an,{})}),Object(g.jsx)(ft.b,{exact:!0,path:"/forgot-password",children:Object(g.jsx)(cn,{})}),Object(g.jsx)(ft.b,{exact:!0,path:"/reset-password",children:Object(g.jsx)(bn,{})}),Object(g.jsx)(ft.b,{path:"/ingredients/:id",children:Object(g.jsx)(pn,{})}),Object(g.jsx)(ft.b,{exact:!0,path:"/feed",children:Object(g.jsx)(Bn,{})}),Object(g.jsx)(ft.b,{path:"/feed/:id",children:Object(g.jsx)(Mn,{isModal:!1})}),Object(g.jsx)(ft.b,{path:"*",children:Object(g.jsx)(In,{})})]}),e&&c&&Object(g.jsx)(ft.b,{path:"/ingredients/:id",children:Object(g.jsx)($t,{title:v,handleModalClose:u,children:Object(g.jsx)(gt,{})})}),e&&i&&Object(g.jsx)(ft.b,{path:"/feed/:id",children:Object(g.jsx)($t,{title:"",handleModalClose:u,children:Object(g.jsx)(Mn,{isModal:!0})})}),e&&i&&Object(g.jsx)(gn,{path:"/profile/orders/:id",children:Object(g.jsx)($t,{title:"",handleModalClose:u,children:Object(g.jsx)(Mn,{isModal:!0})})}),a&&Object(g.jsx)($t,{title:"",handleModalClose:u,children:Object(g.jsx)(yt,{})}),o&&Object(g.jsx)($t,{title:"\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0435",handleModalClose:u,children:Object(g.jsx)("p",{className:"text text_type_main-medium",children:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"})})]})};c.a.render(Object(g.jsx)(a.a.StrictMode,{children:Object(g.jsx)(l.a,{store:pt,children:Object(g.jsx)(s.a,{children:Object(g.jsx)(Ln,{})})})}),document.getElementById("root")),o()},24:function(e,t,n){e.exports={details:"ingredient-details_details__uP6-A",image:"ingredient-details_image__H2-xP",name:"ingredient-details_name__3OKTo",nutritionalValue:"ingredient-details_nutritionalValue__39b2X",text:"ingredient-details_text__1jgQH"}},26:function(e,t,n){e.exports={info:"order-feed-info_info__6oMuG",orderNums:"order-feed-info_orderNums__3IGGn",text:"order-feed-info_text__3GzNI",list:"order-feed-info_list__1cN0d",orderId:"order-feed-info_orderId__2HcNN",count:"order-feed-info_count__sslDJ"}},28:function(e,t,n){e.exports={ingredients:"burger-ingredients_ingredients__2TY9H",title:"burger-ingredients_title__32v1n",tabs:"burger-ingredients_tabs__1yNyE",scrollableList:"burger-ingredients_scrollableList__ndQQa",scrollableListItem:"burger-ingredients_scrollableListItem__5PjaE"}},32:function(e,t,n){e.exports={form:"auth-form_form__1d4QB",title:"auth-form_title__3QMLn",list:"auth-form_list__2tAW_",listItem:"auth-form_listItem__3HETV",text:"auth-form_text__3DpyY",link:"auth-form_link__a660i"}},36:function(e,t,n){e.exports={order:"order-details_order__12ZdD",id:"order-details_id__1POxV",title:"order-details_title__FoYOr",image:"order-details_image__lnOoe",info:"order-details_info__1dZwp"}},37:function(e,t,n){e.exports={burgerConstructor:"burger-constructor_burgerConstructor__1Ei5R",hoveredContainer:"burger-constructor_hoveredContainer__1BRev",list:"burger-constructor_list__2lXaw",makeOrderInfo:"burger-constructor_makeOrderInfo__3xu6z",price:"burger-constructor_price__Q5cGy"}},38:function(e,t,n){e.exports={card:"ingredient-item_card__2tuyr",dragCard:"ingredient-item_dragCard__2xQt_",price:"ingredient-item_price__3YWz3",digit:"ingredient-item_digit__21FZc",text:"ingredient-item_text__7UJ12"}},39:function(e,t,n){e.exports={linkList:"profile-menu_linkList__3oY89",linkListItem:"profile-menu_linkListItem__26GyW",link:"profile-menu_link__1GXQJ",activeLink:"profile-menu_activeLink__1Ahyy",text:"profile-menu_text__lo4lQ"}},40:function(e,t,n){e.exports={inputList:"profile-form_inputList__9Mtgl",inputListItem:"profile-form_inputListItem__10rvU",buttons:"profile-form_buttons__13iek"}},47:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",modalHeader:"modal_modalHeader__Ukaot",title:"modal_title__1efUU",closeButton:"modal_closeButton__2SoUT"}},57:function(e,t,n){e.exports={ingredients:"ingredients-list_ingredients__2NfY-",title:"ingredients-list_title__1XkLE",list:"ingredients-list_list__2ysSO"}},58:function(e,t,n){e.exports={page:"not-found-page_page__24p2A",title:"not-found-page_title__1a4A-",text:"not-found-page_text__1bzml"}},59:function(e,t,n){e.exports={feed:"feed_feed__1Jw3v",title:"feed_title__yRxeu",content:"feed_content__9ySNd"}},79:function(e,t,n){e.exports={header:"app-header_header__1iHLW",link:"app-header_link__2y8TU"}},83:function(e,t,n){e.exports={page:"ingredient-item-page_page__lnrsr"}},84:function(e,t,n){e.exports={list:"order-list_list__38FhK",listWide:"order-list_listWide__3Hzh6"}}},[[208,1,2]]]);
//# sourceMappingURL=main.9f9397bf.chunk.js.map